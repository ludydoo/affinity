(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){module.exports=require("./lib")},{"./lib":102}],2:[function(require,module,exports){var Base=require("./Base.js");var Type=require("./Type.js");var _=require("lodash");var Attribute=Base.extend({constructor:function(args){this.negated=false;if(args){if(args.name){if(!_.isString(args.name)){throw new TypeError("Name is of wrong type")}else{this.name=args.name}}else{this.name=null}if(args.type){if(!(args.type.prototype instanceof Type)){throw new TypeError("Type is of wrong type")}else{this.type=args.type;_.forIn(args.type.payload,function(mix){_.forIn(mix,function(mixin,key){this[key]=mixin},this)},this)}}else{this.type=null}}Base.apply(this,arguments)},clone:function(){var attr=new this.constructor({type:this.type,name:this.name});if(this.relationHeader){attr.relationHeader=this.relationHeader}if(this.wrappedAttributes){attr.wrappedAttributes=this.wrappedAttributes}return attr},_checkNegatedAttribute:function(expression){if(this.negated){this.negated=false;return new(require("./functions/connective/Not.js"))(expression)}else{return expression}},toString:function(){return this.name+" : "+this.type.toString()},equal:function(attribute){return this.constructor.equal(this,attribute)}},{type:"Attribute",assertValidName:function(name){if(!_.isString(name)){throw new Error("Name must be a string")}if(name===""){throw new Error("Attribute name cannot be empty string")}},equal:function(attribute1,attribute2){return attribute1.name===attribute2.name&&attribute1.type===attribute2.type},coerce:function(attribute){if(attribute instanceof Attribute){return attribute}if(_.isObject(attribute)){var name;var type;var attr;var keys;if(attribute.type&&attribute.name){name=attribute.name;type=attribute.type}else{keys=_.keys(attribute);if(keys.length!==1){throw new Error("Unsupported Attribute declaration")}name=keys[0];attr=attribute[name];if(attr instanceof Attribute){attr.name=name;return attr}else if(attr.type){type=attribute[name].type}}}return new Attribute({name:name,type:type})}});module.exports=Attribute},{"./Base.js":3,"./Type.js":11,"./functions/connective/Not.js":46,lodash:104}],3:[function(require,module,exports){var _=require("lodash");var extend=function(protoProps,staticProps){var parent=this;var child;if(protoProps&&_.has(protoProps,"constructor")){child=protoProps.constructor}else{child=function(){return parent.apply(this,arguments)}}_.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};Surrogate.prototype=parent.prototype;child.prototype=new Surrogate;if(protoProps)_.extend(child.prototype,protoProps);child.__super__=parent.prototype;return child};var Base=function(){};Base.extend=extend;Base.mixin=function(mixin){_.extend(this.prototype,mixin)};module.exports=Base},{lodash:104}],4:[function(require,module,exports){var Base=require("./Base.js");var _=require("lodash");var Attribute=require("./Attribute");var Function=Base.extend({constructor:function(parameters){this.parameters=[];for(var i=0,j=arguments.length;i<j;i++){this.parameters.push(arguments[i])}Base.apply(this,arguments)},set:function(param){for(var a in param){if(param.hasOwnProperty(a))this[a]=param[a]}_.forEach(this.args,function(arg){if(arg instanceof Function){arg.set(param)}});return this},convertAttributeToTuple:function(){_.forEach(this.parameters,function(parameter,index){if(_.isFunction(parameter.convertAttributeToTuple)){parameter.convertAttributeToTuple()}if(parameter instanceof Attribute){var newFunc=new(require("./functions/tuple/Attribute"))(parameter.name);newFunc.type=parameter.type;this.parameters[index]=newFunc}},this)},assignTuple:function(tuple){_.forEach(this.parameters,function(parameter,index){if(parameter instanceof Function){parameter.assignTuple(tuple)}},this);return this},type:function(type){if(type){this._type=type;_.forIn(type.payload,function(mix){_.forIn(mix,function(mixin,key){this[key]=mixin},this)},this)}else{return this._type}}});module.exports=Function},{"./Attribute":2,"./Base.js":3,"./functions/tuple/Attribute":79,lodash:104}],5:[function(require,module,exports){var Attribute=require("./Attribute.js");var Set=require("./Set.js");var _=require("lodash");var TString=require("./types/String");var TType=require("./types/Type");var debug=require("./helpers/debug.js");var Header=Set.extend({constructor:function(attributes){debug.header.trace("#constructor");var result=[];this._attributes={};this.orderedDeclaration=false;if(attributes){if(_.isObject(attributes)){if(!_.isArray(attributes)){_.forOwn(attributes,function(attribute,key){var attr={};attr[key]=attribute;result.push(attr)})}else{this.orderedDeclaration=true;_.forEach(attributes,function(attribute,key){result.push(attribute)},this)}}else{throw new TypeError("Unsupported attribute declaration format")}}else{result=[]}Set.call(this,{type:Attribute,elements:result})},bindEvents:function(){debug.header.trace("#bindEvents");var that=this;this.ee.on("beforeAdd",function(element){if(that._attributes.hasOwnProperty(element.name)){throw new Error("Attribute with name "+element.name+" already exists in header")}});this.ee.on("afterAdd",function(element,index){that._attributes[element.name]=index;element.header=that});this.ee.on("afterRemove",function(element){delete that._attributes[element.name];that.refreshAttributes()})},refreshAttributes:function(){debug.header.trace("#refreshAttributes");this._attributes={};this.each(function(element,index){if(!_.isUndefined(element)){this._attributes[element.name]=index}},this)},get:function(key){debug.header.trace("#get");if(key instanceof Attribute){if(!this._attributes.hasOwnProperty(key.name)){return null}var attr=this.get(key.name);if(!attr.equals(key)){return null}else{return attr}}else if(_.isString(key)){if(!this._attributes.hasOwnProperty(key)){return null}return this.elements()[this._attributes[key]]}},getIndex:function(name){debug.header.trace("#getIndex");if(!this._attributes.hasOwnProperty(name)){return null}return this._attributes[name]},getAt:function(index){if(this._elements[index]!==undefined){return this._elements[index]}return null},attributes:function(attributes){debug.header.trace("#attributes");if(attributes){return this.elements(attributes)}else{return this.elements()}},clone:function(){debug.header.trace("#clone");var newHeader=new this.constructor;this.each(function(element){if(!_.isUndefined(element)){newHeader.add(element.clone(),false)}});return newHeader},project:function(projectedAttributes){debug.header.trace("#project");var resultAttributes={},a;a=projectedAttributes.length;while(a--){var projectedAttribute=projectedAttributes[a];if(_.isString(projectedAttribute)){var attributeName=projectedAttribute;projectedAttribute=this.get(attributeName);if(projectedAttribute===null){throw new ReferenceError("Attribute with name "+attributeName+" not found in header")}}else if(projectedAttribute instanceof Attribute){var found=_.find(this.elements(),function(attribute){return attribute===projectedAttribute});if(!found){throw new ReferenceError("Attribute not found in the header")}}else{throw new TypeError("Wrong format given for attributes in Header project operation")}resultAttributes[projectedAttribute.name]=projectedAttribute.clone()}return new Header(resultAttributes)},remove:function(attributesToRemove){debug.header.trace("#remove");var resultHeader=this.clone(),a,attribute,attributeName;if(_.isString(attributesToRemove)||attributesToRemove instanceof Attribute){attributesToRemove=[attributesToRemove]}else if(!_.isArray(attributesToRemove)){throw new TypeError("Wrong argument type for removal operation")}a=attributesToRemove.length;while(a--){if(_.isString(attributesToRemove[a])){attributeName=attributesToRemove[a];attribute=attributesToRemove[a]=this.get(attributeName);if(attribute===null){throw new ReferenceError("Attribute with name "+attributeName+" not found in header")}}else{attribute=attributesToRemove[a];attributeName=attribute.name;if(!this._attributes.hasOwnProperty(attributeName)){throw new ReferenceError("Attribute with name "+attributeName+" not found in header")}else if(this.get(attributeName).equal(attribute)===false){throw new ReferenceError("Attribute object found in the header but not of same type")}}resultHeader.removeAt(resultHeader.getIndex(attributeName))}return resultHeader},rename:function(attributes){debug.header.trace("#rename");var resultHeader=this.clone(),key;if(_.isObject(attributes)){for(key in attributes){if(attributes.hasOwnProperty(key)){var newName=attributes[key];if(!_.isString(newName)){throw new TypeError("New name for attribute "+key+" must be a string")}var targetAttribute=this.get(key);if(targetAttribute===null){throw new ReferenceError("Attribute with name "+key+" doesn't exist in header")}if(this._attributes.hasOwnProperty(newName)&&newName!==key){throw new ReferenceError("New attribute name "+newName+" already exists in the header")}if(newName===key){debug.header.warn("Useless renaming operations : "+key+" -> "+newName)}for(var a in attributes){if(attributes.hasOwnProperty(a)&&a!==key){if(newName===attributes[a]){throw new ReferenceError("Two renamed attributes have the same target name")}}}resultHeader._attributes[newName]=resultHeader._attributes[key];if(key!==newName){delete resultHeader._attributes[key]}resultHeader.get(newName).name=newName}}}else{throw new TypeError("Wrong argument type for rename operation")}return resultHeader},toRelation:function(){debug.header.trace("#toRelation");var rel=new(require("./Relation.js"))([{name:{type:TString}},{type:{type:TType}}]);this.each(function(attribute){rel.add({name:attribute.name,type:attribute.type})});return rel},fromRelation:function(relation){if(!relation.header().exists({name:"name",type:TString})||!relation.header().exists({name:"type",type:TType})||!(relation.header().length()==2)){throw new Error("Cannot convert relation to header")}relation.each(function(tuple){this.add({name:tuple.get("name"),type:tuple.get("type")},false)},this);return this},copy:function(header,attributesArgument,exclude){var that=this;if(exclude!==true&&exclude!==false){exclude=false}if(attributesArgument){if(!(attributesArgument instanceof Header)){var tempHeader=new Header;if(attributesArgument instanceof Set){attributesArgument.each(function(attribute){if(_.isString(attribute)){var attr=header.get(attribute);if(attr===null){throw new Error('Attribute with name "'+attribute+'" not found in the header')}tempHeader.add(header.get(attribute))}else if(attribute instanceof Attribute){if(header.get(attribute.name)===null){throw new Error('Attribute with name "'+attribute.name+'" not found in the header')}tempHeader.add(attribute.clone())}})}else if(_.isArray(attributesArgument)){_.forEach(attributesArgument,function(attribute){if(_.isString(attribute)){var attr=header.get(attribute);if(attr===null){throw new Error('Attribute with name "'+attribute+'" not found in the header')}tempHeader.add(attr)}else if(attribute instanceof Attribute){if(header.get(attribute.name)===null){throw new Error('Attribute with name "'+attribute.name+'" not found in the header')}tempHeader.add(attribute.clone())}})}else if(_.isString(attributesArgument)){var attr=header.get(attributesArgument);if(attr===null){throw new Error("Attribute with name "+attributesArgument+" not found in the header")}tempHeader.add(attr)}attributesArgument=tempHeader}else{attributesArgument.each(function(attribute){if(header.get(attribute.name)===null){throw new Error("Attribute with name "+attribute.name+" not found in the header")}})}}if(exclude&&attributesArgument){header.each(function(attribute){var isExcluded=false;attributesArgument.each(function(excludedAttribute){if(attribute.equal(excludedAttribute)){isExcluded=true}},this);if(!isExcluded){this.add(attribute.clone())}},this)}else if(!exclude&&attributesArgument){attributesArgument.each(function(includedAttribute){this.add(header.get(includedAttribute.name).clone())},this)}else{header.each(function(attribute){this.add(attribute.clone())},this)}return this}},{assertAttributesExist:function(header,attributes){var mismatch=false;_.forEach(attributes,function(attribute){if(_.isString(attribute)){if(header.get(attribute)===null){throw new Error("Attribute with name "+attribute+" does not exist in the header")}}else if(attribute instanceof Attribute){if(!header.exists(attribute)){throw new Error("Attribute with name "+attribute.name+" does not exist in the header")}}else{throw new Error("Attribute is of wrong type")}})},assertSameNameSameType:function(header1,header2){header1.each(function(attribute1){header2.each(function(attribute2){if(attribute1.name===attribute2.name&&attribute1.type!==attribute2.type){throw new Error("Headers must have same type on attributes of same naem")}})})},assertUnionCompatible:function(header1,header2){if(!this.equal(header1,header2)){throw new Error("Relations are not union compatible")}},assertDisjoint:function(header1,header2){if(!this.disjoint(header1,header2)){throw new Error("Headers must be disjoint")}},commonAttributes:function(header1,header2){return header1.setIntersection(header2)},fromRelation:function(relation){var header=new Header;return header.fromRelation(relation)},equal:function(header1,header2){debug.header.trace("Header.equal");if(Object.keys(header1._attributes).length!==Object.keys(header2._attributes).length){return false}var mismatch=false;header1.each(function(attribute1){var attribute1Name=attribute1.name;if(!header2._attributes.hasOwnProperty(attribute1Name)){mismatch=true;return false}if(!Attribute.equal(attribute1,header2.get(attribute1.name))){mismatch=true;return false}});return!mismatch},disjoint:function(header1,header2){debug.header.trace("Header.disjoint");var headers=header1.length()>header2.length()?[header1,header2]:[header2,header1];var different=true;headers[0].each(function(attribute1){if(headers[1].get(attribute1.name)!==null){different=false;return false}});return different},coerce:function(header){if(header instanceof this){return header}else{return new Header(header)}}});module.exports=Header},{"./Attribute.js":2,"./Relation.js":8,"./Set.js":9,"./helpers/debug.js":83,"./types/String":100,"./types/Type":101,lodash:104}],6:[function(require,module,exports){var Base=require("./Base");var Index=Base.extend({constructor:function(header){this.header=header;this.levels=header.length();this.elements={};this.headerLevels=[];var targetHeader=this.header;for(var k=0;k<this.levels;k++){this.headerLevels[k]=targetHeader;targetHeader=targetHeader.remove(targetHeader.first())}},add:function(tuple,index){var context=this;var headerCount=this.header.length();for(var a=0;a<=headerCount-1;a++){var attribute=context.header.first();var tupleAttributeValue;if(!attribute.type.primitive){tupleAttributeValue=attribute.type.serialize(tuple.get(attribute.name))}else{tupleAttributeValue=tuple.get(attribute.name)}if(a===headerCount-1){context.elements[tupleAttributeValue]=index}else{if(!context.elements.hasOwnProperty(tupleAttributeValue)){var newIndex=new Index(this.headerLevels[a+1]);context.elements[tupleAttributeValue]=newIndex;context=newIndex}else{context=context.elements[tupleAttributeValue]}}}},getIndex:function(tuple){var context=this;var headerCount=this.header.length();for(var a=0;a<=headerCount-1;a++){var attribute=context.header.first();var tupleAttributeValue;if(!attribute.type.primitive){tupleAttributeValue=attribute.type.serialize(tuple.get(attribute.name))}else{tupleAttributeValue=tuple.get(attribute.name)}if(a===headerCount-1){if(!context.elements.hasOwnProperty(tupleAttributeValue)){return null}return context.elements[tupleAttributeValue]}else{if(!context.elements.hasOwnProperty(tupleAttributeValue)){return null}context=context.elements[tupleAttributeValue]}}},remove:function(tuple){var context=this;var headerCount=this.header.length();for(var a=0;a<=headerCount-1;a++){var attribute=context.header.first();var tupleAttributeValue;if(!attribute.type.primitive){tupleAttributeValue=attribute.type.serialize(tuple.get(attribute.name))}else{tupleAttributeValue=tuple.get(attribute.name)}if(a===headerCount-1){if(!context.elements.hasOwnProperty(tupleAttributeValue)){return false}delete context.elements[tupleAttributeValue];return true}else{if(!context.elements.hasOwnProperty(tupleAttributeValue)){return false}context=context.elements[tupleAttributeValue]}}}});module.exports=Index},{"./Base":3}],7:[function(require,module,exports){var Base=require("./Base");var Index=require("./Index");var Header=require("./Header");var _=require("lodash");var Key=Base.extend({constructor:function(relation,attributes){if(!_.isArray(attributes)){attributes=[attributes]}var header=this.header=new Header;header.copy(relation.header(),attributes);var index=this.index=new Index(this.header);relation.ee.on("afterAdd",function(tuple,tupleIndex){index.add(tuple,tupleIndex)});relation.ee.on("beforeDelete",function(tuple,tupleIndex){index.remove(tuple,tupleIndex)});relation.ee.on("beforeUpdate",function(tuple,attributeName){if(header.get(attributeName)!==null){var tupleIndex=index.getIndex(tuple);index.remove(tuple,tupleIndex)}});relation.ee.on("afterUpdate",function(tuple,attributeName){if(header.get(attributeName)!==null){var tupleIndex=index.getIndex(tuple);index.add(tuple,tupleIndex)}})}});module.exports=Key},{"./Base":3,"./Header":5,"./Index":6,lodash:104}],8:[function(require,module,exports){var Header=require("./Header.js");var Tuple=require("./Tuple.js");var Type=require("./Type.js");var _=require("lodash");var Set=require("./Set");var debug=require("./helpers/debug");var Key=require("./Key");var Relation=Set.extend({constructor:function(header,body,constraints){debug.relation.trace("#constructor");this._constraintArguments=constraints;this._pk=null;this._uks=[];this._fks=[];this.header(Header.coerce(header));var that=this;Set.call(this,{type:Tuple,elements:body})},bindEvents:function(){debug.relation.trace("#bindEvents");var that=this;this.ee.on("beforeGetElements",function(){that.ee.emit("beforeGetBody")});this.ee.on("beforeAdd",function(tuple){if(!that.isCompatible(tuple)){throw new Error("Tuple is not union compatible")}});this.ee.once("beforeGetElements",function(){var constraintArguments=that._constraintArguments;if(constraintArguments){if(constraintArguments.pk){that._pk=new Key(that,constraintArguments.pk)}if(constraintArguments.fk){_.forEach(constraintArguments.fk,function(fk){that._fks.push(fk)})}if(constraintArguments.unique){_.forEach(constraintArguments.unique,function(unique){that._uks.push(new Key(that,unique))},that)}}var constraints=_.union(that._pk===null?undefined:[that._pk],that._uks);_.forEach(constraints,function(constraint,index){constraint.header.each(function(attribute){if(!attribute.type.primitive&&!_.isFunction(attribute.type.serialize)){throw new Error('Cannot index attribute "'+attribute.name+'". '+'Its type "'+attribute.type.type+'" must'+'have a "serialize" method for it to be indexable.')}});for(var a=index+1,len=constraints.length;a<len;a++){var checkedKeyHeader=constraints[a].header;if(constraint.header.equal(checkedKeyHeader)){throw new Error("Constraints must be unique")}if(constraint.header.setIntersection(checkedKeyHeader).length()!==0){throw new Error("Constraint must be irreducible")}}})});this.ee.on("afterAdd",function(tuple,index){tuple.index=index;tuple.relation=that})},_index:function(element){if(this._pk){var index=this._pk.index.getIndex(element);if(index!==null){console.log("Found by pk");return index}}var result=null;_.any(this._uks,function(uniqueConstraint){result=uniqueConstraint.index.getIndex(element);if(result!==null)return false},this);return result},get:function(attribute){debug.relation.trace("#get");return this.header().get(attribute)},atIndex:function(index){debug.relation.trace("#atIndex");return this.elements()[index]},body:function(tuples){debug.relation.trace("#body");if(tuples){this.elements(tuples);return this}else{this.ee.emit("beforeGetBody");return this.elements()}},compute:function(){debug.relation.trace("#compute");this.header();this.body();return this},header:function(header){if(header){debug.relation.trace("#header (set)");this._header=header;header.relation=this}else{debug.relation.trace("#header (get)");this.ee.emit("beforeGetHeader");return this._header}},isCompatible:function(tuple){debug.relation.trace("#isCompatible");tuple=Tuple.coerce(tuple);var tupleKeys=Object.keys(tuple.attributes);var tupleKeyCount=tupleKeys.length;var headerKeys=Object.keys(this.header()._attributes);var headerKeyCount=headerKeys.length;if(tupleKeyCount!==headerKeyCount){return false}return!_.some(headerKeys,function(headerAttribute){return!_.some(tupleKeys,function(tupleAttribute){return tupleAttribute===headerAttribute})})},equal:function(relation){debug.relation.trace("#equal");return this.constructor.equal(this,relation)},print:function(){debug.relation.trace("#print");console.log(this.toString())},toString:function(){var hspacing=1,vspacing=1,arr=this.arr=[],headerRow=[],maxWidths=[],maxHeights=[];debug.relation.trace("#getPrintString");this.compute();this.header().each(function(attribute){headerRow.push({width:null,height:null,lines:null,attribute:attribute,string:attribute.toString()})},this);arr.push(headerRow);this.each(function(tuple){var tupleRow=[];_.forEach(headerRow,function(attr){tupleRow.push({width:null,height:null,lines:null,string:tuple.get(attr.attribute.name).toString()})},this);arr.push(tupleRow)},this);function findHeight(string){return string.split("\n").length}function findWidth(string){var lines=string.split("\n"),max=0;_.forEach(lines,function(line){var lineLength=line.length;if(lineLength>max)max=lineLength},this);return max}function findMaxWidth(arr){var max=0;_.forEach(arr,function(obj){var lineWidth=obj.width;if(lineWidth>max)max=lineWidth},this);return max}function findMaxHeight(arr){var max=0;_.forEach(arr,function(obj){var lineHeight=obj.height;if(lineHeight>max)max=lineHeight},this);return max}function parseLines(string){return string.split("\n")}_.forEach(arr,function(row,rowIndex){_.forEach(row,function(col,colIndex){col.width=findWidth(col.string);col.height=findHeight(col.string);col.lines=parseLines(col.string);if(!maxWidths[colIndex]||maxWidths[colIndex]<col.width){maxWidths[colIndex]=col.width}if(!maxHeights[rowIndex]||maxHeights[rowIndex]<col.height){maxHeights[rowIndex]=col.height}},this)},this);var result="\n";result+="+";_.forEach(maxWidths,function(maxWidth,index){for(var a=0;a<maxWidths[index]+hspacing*2+2;a++){result+="-"}result+="+"},this);result+="\n";_.forEach(arr,function(row,rowIndex){var maxHeight=maxHeights[rowIndex];for(var a=0;a<maxHeight;a++){result+="|";_.forEach(row,function(col,colIndex){var maxWidth=maxWidths[colIndex];var line=col.lines[a];if(!line)line="";for(var i=0;i<hspacing;i++){result+=" "}var lineLength=line.length;result+=line;for(var k=0;k<hspacing;k++){result+=" "}for(var b=0;b<maxWidth-lineLength+2*hspacing;b++){result+=" "}result+="|"},this);result+="\n"}result+="+";_.forEach(maxWidths,function(maxWidth,index){for(var a=0;a<maxWidths[index]+hspacing*2+2;a++){if(rowIndex===0){result+="="}else{result+="-"}}result+="+"},this);if(rowIndex!=arr.length-1)result+="\n"},this);return result},update:function(predicate,values){predicate.convertAttributeToTuple();_.forEach(values,function(value){value.convertAttributeToTuple()});this.each(function(tuple){if(predicate.assignTuple(tuple).value()===true){_.forEach(values,function(expression,key){var value=expression.assignTuple(tuple).value();tuple.set(key,value)})}})},difference:function(relation){debug.relation.trace("#difference");return new(require("./algebra/Difference"))(this,relation)},intersect:function(relation){debug.relation.trace("#intersect");var Intersection=require("./algebra/Intersection");return new Intersection(this,relation)},join:function(relation){debug.relation.trace("#join");return new(require("./algebra/Join"))(this,relation)},product:function(relation){debug.relation.trace("#product");return new(require("./algebra/Product"))(this,relation)},project:function(attributeNames){debug.relation.trace("#project");return new(require("./algebra/Projection"))(this,attributeNames)},rename:function(newNames){debug.relation.trace("#rename");return new(require("./algebra/Rename"))(this,newNames)},restrict:function(predicate){debug.relation.trace("#restrict");return new(require("./algebra/Restriction"))(this,predicate)},union:function(relation){debug.relation.trace("#union");return new(require("./algebra/Union"))(this,relation)},compose:function(relation){debug.relation.trace("#compose");return new(require("./algebra/Composition"))(this,relation)},group:function(groupingAttributeName,groupedAttributeNames){debug.relation.trace("#group");return new(require("./algebra/Group"))(this,groupingAttributeName,groupedAttributeNames)},ungroup:function(groupedAttributeNames){debug.relation.trace("#ungroup");return new(require("./algebra/Ungroup"))(this,groupedAttributeNames)},sdifference:function(relation){debug.relation.trace("#sdifference");return new(require("./algebra/Semidifference"))(this,relation)},sjoin:function(relation){debug.relation.trace("#sjoin");return new(require("./algebra/Semijoin"))(this,relation)},wrap:function(wrappingAttributeName,wrappedAttributes){debug.relation.trace("#wrap");return new(require("./algebra/Wrap"))(this,wrappingAttributeName,wrappedAttributes)},unwrap:function(wrappedAttributeNames){debug.relation.trace("#unwrap");return new(require("./algebra/Unwrap"))(this,wrappedAttributeNames)},extend:function(expressions){debug.relation.trace("#extend");return new(require("./algebra/Extension"))(this,expressions)},summarize:function(attributes,summaries){debug.relation.trace("#summarize");return new(require("./algebra/Summarize"))(this,attributes,summaries)},all:function(predicate){var All=require("./functions/aggregate/All.js");return new All(this,predicate)},any:function(predicate){var Any=require("./functions/aggregate/Any.js");return new Any(this,predicate)},count:function(){var Count=require("./functions/aggregate/Count.js");return new Count(this)}},{toString:function(){return"Relation"},type:"Relation",equal:function(rel1,rel2){debug.relation.trace("Relation.equal");if(!rel1.header().equal(rel2.header())){return false}rel1.compute();rel2.compute();return Set.equal(rel1,rel2)}});module.exports=Relation},{"./Header.js":5,"./Key":7,"./Set":9,"./Tuple.js":10,"./Type.js":11,"./algebra/Composition":12,"./algebra/Difference":13,"./algebra/Extension":14,"./algebra/Group":15,"./algebra/Intersection":16,"./algebra/Join":17,"./algebra/Product":18,"./algebra/Projection":19,"./algebra/Rename":20,"./algebra/Restriction":21,"./algebra/Semidifference":24,"./algebra/Semijoin":25,"./algebra/Summarize":26,"./algebra/Ungroup":27,"./algebra/Union":28,"./algebra/Unwrap":29,"./algebra/Wrap":30,"./functions/aggregate/All.js":31,"./functions/aggregate/Any.js":32,"./functions/aggregate/Count.js":34,"./helpers/debug":83,lodash:104}],9:[function(require,module,exports){var Type=require("./Type.js");var _=require("lodash");var coerce=require("./helpers/coerce");var equal=require("./helpers/equal");var clone=require("./helpers/clone");var EventEmitter=require("eventemitter2").EventEmitter2;var debug=require("./helpers/debug.js");var Set=Type.extend({constructor:function(args){debug.set.trace("#constructor");this.ee=new EventEmitter;this._type=null;this._elements=[];this._deletedCount=0;if(_.isFunction(this.bindEvents)){this.bindEvents()}if(args){if(args.type){this.type(args.type)}if(args.elements){this.elements(args.elements)}}Type.apply(this,arguments)},elements:function(elements){debug.set.trace("#elements");if(this.type()===null){throw new Error("Must define the type of the set first")}if(elements){if(!_.isArray(elements)){throw new TypeError("elements must be in array format")}this.ee.emit("beforeSetElements",elements);_.forEach(elements,function(element){this.add(element)},this);this.ee.emit("afterSetElements",elements)}else{this.ee.emit("beforeGetElements");return this._elements}},type:function(type){debug.set.trace("#type");if(type){this._type=type}else{return this._type}},each:function(callback,context){debug.set.trace("#each");_.forEach(this.elements(),function(element,index){if(element!==undefined){if(callback.call(context,element,index)===false){return false}}})},add:function(element,checkDuplicate){if(_.isUndefined(checkDuplicate)){checkDuplicate=true}debug.set.trace("#add");if(element){element=coerce(this.type(),element,this);if(checkDuplicate&&!this.exists(element)||!checkDuplicate){this.ee.emit("beforeAdd",element);var newIndex=this.elements().push(element)-1;this.ee.emit("afterAdd",element,newIndex);return true}}return false},remove:function(element){debug.set.trace("#remove");element=coerce(this.type(),element);var index=this.index(element);return this.removeAt(index)},removeAt:function(index){debug.set.trace("#removeAt");var element=this.atIndex(index);if(element===undefined){return false}this.ee.emit("beforeRemove",element,index);this.elements()[index]=undefined;this._deletedCount++;this.ee.emit("afterRemove",element,index);return true},first:function(){var result=_.find(this.elements(),function(element){if(!_.isUndefined(element)){return true}});if(_.isUndefined(result)){return null}else{return result}},_indexByEquality:function(object){debug.set.trace("#indexByEquality");var result=null;this.each(function(element,key){if(equal(this.type(),element,object)){result=key;return false}},this);return result},index:function(element){debug.set.trace("#index");var result=null;element=coerce(this.type(),element);if(this._index){result=this._index(element)}if(result!==null)return result;return this._indexByEquality(element)},atIndex:function(index){debug.set.trace("#atIndex");return this.elements()[index]},find:function(element){debug.set.trace("#find");var index=this.index(element);if(index!==null){return this.atIndex(index)}else{return null}},exists:function(element){debug.set.trace("#exists");var index=this.index(element);return index!==null},length:function(){return this.elements().length-this._deletedCount},setUnion:function(set2){debug.set.trace("#union");var thisType=this.type();var otherType=set2.type();var type=thisType===otherType?thisType:null;var newSet=new this.constructor;newSet.type(type);_.forEach([this,set2],function(aSet){aSet.each(function(element){newSet.add(clone(element))})});return newSet},setDifference:function(set2){debug.set.trace("#difference");var newSet=new this.constructor;newSet.type(this.type());this.each(function(element){if(!set2.exists(element)){newSet.add(clone(element),false)}});return newSet},setProduct:function(set2){debug.set.trace("#product");var Tuple=require("./Tuple.js");var newSet=new Set({type:Tuple});this.each(function(element1){set2.each(function(element2){var tuple=new Tuple({0:element1,1:element2});newSet.add(tuple,false)})});return newSet},setIntersection:function(set2){debug.set.trace("#intersection");var newSet=new this.constructor;newSet.type(this.type());this.each(function(element1){if(set2.exists(element1)){newSet.add(clone(element1),false)}},this);return newSet},setSymmetricDifference:function(set2){debug.set.trace("#symmetricDifference");var newSet=new this.constructor({type:this.type()});var set1=this;set1.each(function(element1){if(!set2.exists(element1)){newSet.add(clone(element1))}});set2.each(function(element2){if(!set1.exists(element2)){newSet.add(clone(element2))}});return newSet},isSubset:function(aSet){var match=true;this.each(function(element){if(!aSet.exists(element)){match=false;
return false}});return match},isSuperset:function(aSet){return!aSet.isSubset(this)},isProperSubset:function(aSet){if(this.length()>=aSet.length()){return false}return this.isSubset(aSet)},isProperSuperset:function(aSet){return!aSet.isProperSubset(this)},equal:function(anotherSet){debug.set.trace("#equal");return this.constructor.equal(this,anotherSet)},clone:function(){debug.set.trace("#clone");var newSet=new this.constructor(this.type);this.each(function(element){newSet.add(element,false)});return newSet}},{equal:function(set1,set2){debug.set.trace("#equal");var setLength1=set1.elements().length,setLength2=set2.elements().length,mismatch=false;if(set1.type()&&set2.type()&&set1.type()!==set2.type()){return false}if(setLength1!==setLength2){return false}set1.each(function(element1){var index2=set2.index(element1);if(index2===null){mismatch=true;return false}});return!mismatch}});module.exports=Set},{"./Tuple.js":10,"./Type.js":11,"./helpers/clone":80,"./helpers/coerce":81,"./helpers/debug.js":83,"./helpers/equal":84,eventemitter2:103,lodash:104}],10:[function(require,module,exports){var Type=require("./Type.js");var Header=require("./Type.js");var TString=require("./types/String.js");var Attribute=require("./Attribute.js");var _=require("lodash");var equal=require("./helpers/equal");var value=require("./helpers/value");var Set=require("./Set.js");var Tuple=Type.extend({constructor:function(attributes){this.attributes={};if(attributes){if(!_.isObject(attributes)){throw new TypeError("Tuple attributes in wrong format")}var a;for(a in attributes){if(attributes.hasOwnProperty(a)){this.set(a,attributes[a])}}}Type.apply(this,arguments)},each:function(callback,context){_.forIn(this.attributes,callback,context)},copy:function(tuple,attributesArgument,exclude){if(exclude!==true&&exclude!==false){exclude=false}if(!_.isUndefined(attributesArgument)&&!_.isNull(attributesArgument)){var result=new Set({type:TString});if(attributesArgument instanceof Header){attributesArgument.each(function(attribute){result.add(attribute.name)})}else if(attributesArgument instanceof Set){attributesArgument.each(function(attributeArgument){if(attributeArgument instanceof Attribute){result.add(attributeArgument.name)}else if(_.isString(attributeArgument)){result.add(attributeArgument)}})}else if(_.isArray(attributesArgument)){_.forEach(attributesArgument,function(attributeArgument){if(attributeArgument instanceof Attribute){result.add(attributeArgument.name)}else if(_.isString(attributeArgument)){result.add(attributeArgument)}})}else if(_.isString(attributesArgument)){result.add(attributesArgument)}attributesArgument=result}if(attributesArgument&&exclude===false){attributesArgument.each(function(copiedAttribute){this.set(value(copiedAttribute),tuple.get(value(copiedAttribute)))},this)}else{_.forEach(tuple.attributes,function(tupleAttribute,tupleAttributeKey){if(attributesArgument&&exclude===true){var isExcludedAttribute=false;attributesArgument.each(function(excludedAttribute){if(equal(TString,excludedAttribute,tupleAttributeKey)){isExcludedAttribute=true;return false}});if(!isExcludedAttribute){this.set(tupleAttributeKey,tupleAttribute)}}else{this.set(tupleAttributeKey,tupleAttribute)}},this)}},equals:function(tuple){return Tuple.equal(this,tuple)},set:function(attributeName,value){if(this.relation){this.relation.ee.emit("beforeUpdate",this,attributeName,value)}this.attributes[attributeName]=value;if(this.relation){this.relation.ee.emit("afterUpdate",this,attributeName,value)}},get:function(attributeName){return this.attributes[attributeName]},"delete":function(attributeName){delete this.attributes[attributeName]},clone:function(){var attr,newTuple=new this.constructor;_.forEach(this.attributes,function(attribute,key){if(_.isFunction(attribute.clone)){attr=attribute.clone()}else{attr=attribute}newTuple.set(key,attr)},this);return newTuple},toString:function(){var count=0;var attrLength=Object.keys(this.attributes).length;var attrs=["Tuple({"];this.each(function(attribute,key){attrs.push(key.toString()+" : "+attribute.toString());if(count!==attrLength-1){attrs.push(", ")}count++},this);attrs.push("})");return attrs.join("")}},{type:"Tuple",toString:function(){return"Tuple"},equal:function(tuple1,tuple2){var key;if(!(tuple1 instanceof Tuple)||!(tuple2 instanceof Tuple)){throw new Error("Provided tuples are of the wrong type")}var match=true;tuple1.each(function(attr,key){if(tuple2.get(key)===null){match=false;return false}if(!equal(null,attr,tuple2.get(key))){match=false;return false}});return match},matchOnAttributes:function(tuple1,tuple2,attributes){var match=true;attributes.each(function(attribute){var attributeName=attribute.name;if(!equal(null,tuple1.get(attributeName),tuple2.get(attributeName))){match=false;return false}});return match},coerce:function(tuple,relation){if(tuple instanceof Tuple){return tuple}else{if(!_.isObject(tuple)){throw new TypeError("Wrong parameter type. Expected an object or a Tuple")}if(_.isArray(tuple)){if(_.isUndefined(relation)||_.isNull(relation)){throw new Error("Cannot coerce array-declared tuple if no relation is specified")}if(_.isFunction(relation.header)){var header=relation.header(),headerCount=header.length();if(headerCount>0){if(!header.orderedDeclaration){throw new Error("Cannot coerce an array declared tuple if the header has not been declared in array format")}if(headerCount!==tuple.length){throw new Error("Cannot coerce Tuple, it does not have the same number of attributes as the header")}var newTuple=new Tuple;header.each(function(attribute,index){newTuple.set(attribute.name,tuple[index])});return newTuple}}}tuple=new Tuple(tuple);return tuple}}});module.exports=Tuple},{"./Attribute.js":2,"./Set.js":9,"./Type.js":11,"./helpers/equal":84,"./helpers/value":86,"./types/String.js":100,lodash:104}],11:[function(require,module,exports){var Base=require("./Base.js");var Type=Base.extend({constructor:function(value){Base.apply(this,arguments)},clone:function(){return new this.constructor(this._value)}},{type:"Type",toString:function(){return"Type"}});module.exports=Type},{"./Base.js":3}],12:[function(require,module,exports){var Relation=require("./../Relation.js");var Header=require("./../Header.js");var Tuple=require("./../Tuple.js");var _=require("lodash");var debug=require("./../helpers/debug");var Composition=Relation.extend({constructor:function(relationA,relationB){debug.compose.trace("#constructor");this.args={};this.args.left=relationA;this.args.right=relationB;Relation.call(this);this.commonAttributes=null},bindEvents:function(){debug.compose.trace("#bindEvents");Composition.__super__.bindEvents.call(this);var that=this;var left=that.args.left;var right=that.args.right;this.ee.once("beforeGetHeader",function(){var leftHeader=left.header();var rightHeader=right.header();debug.compose.trace("beforeGetHeader");Header.assertSameNameSameType(leftHeader,rightHeader);that.commonAttributes=Header.commonAttributes(leftHeader,rightHeader);that.leftAttributes=leftHeader.setDifference(that.commonAttributes);that.rightAttributes=rightHeader.setDifference(that.commonAttributes);that.header().copy(leftHeader.setUnion(rightHeader).setDifference(that.commonAttributes))});this.ee.once("beforeGetBody",function(){debug.compose.trace("beforeGetBody");left.each(function(tuple){that.afterAdd(left,tuple)});right.each(function(tuple){that.afterAdd(right,tuple)})});left.ee.on("afterAdd",function(tuple){that.afterAdd(left,tuple)});right.ee.on("afterAdd",function(tuple){that.afterAdd(right,tuple)});left.ee.on("afterRemove",function(tuple,index){that.afterRemove(left,tuple)});right.ee.on("afterRemove",function(tuple,index){that.afterRemove(right,tuple)});left.ee.on("afterUpdate",function(tuple,attributeName,value){that.afterUpdate(left,tuple,attributeName,value)});right.ee.on("afterUpdate",function(tuple,attributeName,value){that.afterUpdate(right,tuple,attributeName,value)})},afterAdd:function(relation,tuple1){var that=this;var otherRelation=relation===that.args.left?that.args.right:that.args.left;otherRelation.each(function(tuple2){var match=Tuple.matchOnAttributes(tuple1,tuple2,that.commonAttributes);if(match){var combinedTuple=_.extend({},tuple1.attributes,tuple2.attributes);var newTuple=new Tuple;that.header().each(function(composeAttribute){var composeAttributeName=composeAttribute.name;newTuple.set(composeAttributeName,combinedTuple[composeAttributeName])});that.add(newTuple)}})},afterRemove:function(relation,removedTuple){var that=this;var nonCommonAttributes=relation===that.args.left?that.leftAttributes:that.rightAttributes;that.each(function(tuple,index){var match=Tuple.matchOnAttributes(tuple,removedTuple,nonCommonAttributes);if(match){that.removeAt(index)}})},afterUpdate:function(relation,tuple,attributeName,value){var that=this;var otherRelation=relation===that.args.left?that.args.right:that.args.left;if(that.commonAttributes.get(attributeName)!==null){}else{}}});module.exports=Composition},{"./../Header.js":5,"./../Relation.js":8,"./../Tuple.js":10,"./../helpers/debug":83,lodash:104}],13:[function(require,module,exports){var Relation=require("./../Relation.js");var Header=require("./../Header.js");var _=require("lodash");var debug=require("./../helpers/debug");var Difference=Relation.extend({constructor:function(relationA,relationB){debug.difference.trace("#constructor");this.rels=[relationA,relationB];Relation.call(this)},bindEvents:function(){debug.difference.trace("#bindEvents");Difference.__super__.bindEvents.call(this);var that=this;var rel1=that.rels[0];var rel2=that.rels[1];this.ee.once("beforeGetHeader",function(){var header1=rel1.header();var header2=rel2.header();debug.difference.trace("beforeGetHeader");Header.assertUnionCompatible(header1,header2);that.header().copy(header1)});this.ee.once("beforeGetBody",function(){debug.difference.trace("beforeGetBody");rel1.each(function(tuple1){if(rel2.index(tuple1)===null){that.add(tuple1.clone(),false)}})})}});module.exports=Difference},{"./../Header.js":5,"./../Relation.js":8,"./../helpers/debug":83,lodash:104}],14:[function(require,module,exports){var Relation=require("./../Relation.js");var Header=require("./../Header.js");var Attribute=require("./../Attribute.js");var Tuple=require("./../Tuple.js");var _=require("lodash");var debug=require("./../helpers/debug");var Extend=Relation.extend({constructor:function(relation,expressions){debug.extend.trace("#constructor");this.relation=relation;this.expressions=expressions;if(!_.isArray(this.expressions)){this.expressions=[this.expressions]}if(this.expressions.length===0){throw new Error("You must define expressions!")}Relation.call(this)},bindEvents:function(){debug.extend.trace("#bindEvents");Extend.__super__.bindEvents.call(this);var that=this;this.ee.once("beforeGetHeader",function(){debug.extend.trace("beforeGetHeader");that.header().copy(that.relation.header());_.forOwn(that.expressions,function(expression,key){if(!_.isObject(expression)){throw new TypeError("Wrong expression format")}var keys=Object.keys(expression);if(keys.length!==1){throw new SyntaxError("Unhandled expression declaration")}var extensionName=keys[0];var extensionParam=expression[extensionName];var type;if(extensionParam instanceof Attribute){type=extensionParam.type;that.expressions[key][extensionName]=extensionParam=new(require("./../functions/tuple/Attribute"))(extensionParam.name)}else{extensionParam.convertAttributeToTuple();type=extensionParam.type()}if(that.header().get(extensionName)!==null){throw new Error("Relation extension name already exists in the header")}var extensionAttribute=new Attribute({type:type,name:extensionName});that.header().add(extensionAttribute)})});this.ee.once("beforeGetBody",function(){debug.extend.trace("beforeGetBody");that.relation.each(function(tuple){var newTuple=new Tuple;newTuple.copy(tuple);_.forEach(that.expressions,function(expression){var attributeName=Object.keys(expression)[0];var attributeExpression=expression[attributeName];attributeExpression.assignTuple(newTuple);var expressionValue=attributeExpression.value();newTuple.set(attributeName,expressionValue)});that.add(newTuple)})})}});module.exports=Extend},{"./../Attribute.js":2,"./../Header.js":5,"./../Relation.js":8,"./../Tuple.js":10,"./../functions/tuple/Attribute":79,"./../helpers/debug":83,lodash:104}],15:[function(require,module,exports){var Relation=require("./../Relation.js");var Header=require("./../Header.js");var Tuple=require("./../Tuple.js");var Attribute=require("./../Attribute.js");var _=require("lodash");var debug=require("./../helpers/debug");var Group=Relation.extend({constructor:function(relation,attributeName,attributes){debug.group.trace("#constructor");this.relation=relation;this.groupingAttributeName=attributeName;this.groupedAttributeNames=attributes;this.groupedAttributes=[];this.groupingAttribute=null;Relation.call(this)},bindEvents:function(){debug.group.trace("#bindEvents");Group.__super__.bindEvents.call(this);var that=this,groupedAttributeNames=this.groupedAttributeNames,groupingAttributeName=this.groupingAttributeName,relation=this.relation,groupedAttributes=that.groupedAttributes;this.ee.once("beforeGetHeader",function(){var header=relation.header();debug.group.trace("beforeGetHeader");_.forEach(groupedAttributeNames,function(groupedAttributeName){if(header.get(groupedAttributeName)===null){throw new Error('Attribute with name "'+groupedAttributeName+'" does not exist in the header')}});header.each(function(attribute){var present=_.any(groupedAttributeNames,function(groupedAttributeName){return groupedAttributeName===attribute.name});if(!present){that.header().add(attribute.clone())}else{groupedAttributes.push(attribute)}});that.groupingAttribute=new Attribute({name:groupingAttributeName,type:Relation});that.header().add(that.groupingAttribute)});this.ee.once("beforeGetBody",function(){debug.group.trace("beforeGetBody");that.header();relation.each(function(tuple){var groupedAttributeValues={};var nonGroupedAttributeValues={};tuple.each(function(value,key){var grouped=_.any(that.groupedAttributes,function(groupedAttribute){return key===groupedAttribute.name});if(grouped){groupedAttributeValues[key]=value}else{nonGroupedAttributeValues[key]=value}});var matchingTuple=null;that.each(function(tuple){var match=true;_.forOwn(nonGroupedAttributeValues,function(value,key){if(tuple.get(key)!==value){match=false;return false}});if(match){matchingTuple=tuple;return false}});if(matchingTuple===null){var newTuple=new Tuple(nonGroupedAttributeValues);var newRelation=new Relation;_.forOwn(groupedAttributes,function(attribute){newRelation.header().add(attribute.clone())});that.groupingAttribute.relationHeader=newRelation.header().clone();newTuple.set(groupingAttributeName,newRelation);that.add(newTuple,false);matchingTuple=newTuple}var nestedTuple=new Tuple(groupedAttributeValues);matchingTuple.get(groupingAttributeName).add(nestedTuple,false)})})}});module.exports=Group},{"./../Attribute.js":2,"./../Header.js":5,"./../Relation.js":8,"./../Tuple.js":10,"./../helpers/debug":83,lodash:104}],16:[function(require,module,exports){var Relation=require("./../Relation.js");var Header=require("./../Header.js");var _=require("lodash");var debug=require("./../helpers/debug");var Intersection=Relation.extend({constructor:function(relationA,relationB){this.rels=[relationA,relationB];Relation.call(this)},bindEvents:function(){debug.intersection.trace("#bindEvents");Intersection.__super__.bindEvents.call(this);var that=this;var rel1=that.rels[0],rel2=that.rels[1];this.ee.once("beforeGetHeader",function(){var header1=rel1.header();var header2=rel2.header();debug.intersection.trace("beforeGetHeader");Header.assertUnionCompatible(header1,header2);that.header().copy(header1)});this.ee.once("beforeGetBody",function(){debug.intersection.trace("beforeGetBody");rel1.each(function(tuple1){if(rel2.index(tuple1)!==null){that.add(tuple1.clone(),false)}})})}});module.exports=Intersection},{"./../Header.js":5,"./../Relation.js":8,"./../helpers/debug":83,lodash:104}],17:[function(require,module,exports){var Relation=require("./../Relation.js");var Header=require("./../Header.js");var Tuple=require("./../Tuple.js");var debug=require("./../helpers/debug");var _=require("lodash");var Join=Relation.extend({constructor:function(relationA,relationB){this.rels=[relationA,relationB];this._commonAttributes=[];Relation.call(this);var that=this},bindEvents:function(){debug.join.trace("#bindEvents");Join.__super__.bindEvents.call(this);var that=this;var rel1=that.rels[0];var rel2=that.rels[1];this.ee.once("beforeGetHeader",function(){debug.join.trace("beforeGetHeader");var header1=rel1.header();var header2=rel2.header();Header.assertSameNameSameType(header1,header2);that.commonAttributes=Header.commonAttributes(header1,header2);that.header().copy(header1);that.header().copy(header2)});this.ee.once("beforeGetBody",function(){that.header();debug.join.trace("beforeGetBody");rel1.each(function(tuple1){rel2.each(function(tuple2){var match=Tuple.matchOnAttributes(tuple1,tuple2,that.commonAttributes);if(match){var newTuple=new Tuple;newTuple.copy(tuple1);newTuple.copy(tuple2);that.add(newTuple,false)}},that)},that)})}});module.exports=Join},{"./../Header.js":5,"./../Relation.js":8,"./../Tuple.js":10,"./../helpers/debug":83,lodash:104}],18:[function(require,module,exports){var Relation=require("./../Relation.js");var Header=require("./../Header.js");var Tuple=require("./../Tuple.js");var _=require("lodash");var debug=require("./../helpers/debug");var Product=Relation.extend({constructor:function(relationA,relationB){debug.product.trace("#constructor");this.rels=[relationA,relationB];Relation.call(this)},bindEvents:function(){debug.product.trace("#bindEvents");Product.__super__.bindEvents.call(this);var that=this;var rel1=this.rels[0];var rel2=this.rels[1];that.ee.once("beforeGetHeader",function(){debug.product.trace("beforeGetHeader");var header1=rel1.header();var header2=rel2.header();Header.assertDisjoint(header1,header2);that.header().copy(header1.setUnion(header2))});that.ee.once("beforeGetBody",function(){debug.product.trace("beforeGetBody");var tupleSet=rel1.setProduct(rel2);tupleSet.each(function(tuplePair){var newTuple=new Tuple;newTuple.copy(tuplePair.get("0"));newTuple.copy(tuplePair.get("1"));that.add(newTuple,false)},that)})}});module.exports=Product},{"./../Header.js":5,"./../Relation.js":8,"./../Tuple.js":10,"./../helpers/debug":83,lodash:104}],19:[function(require,module,exports){var Relation=require("./../Relation.js");var Header=require("./../Header.js");var Tuple=require("./../Tuple.js");var _=require("lodash");var debug=require("./../helpers/debug");var Projection=Relation.extend({constructor:function(relation,args){this.rel=relation;this.args=args;Relation.call(this)},bindEvents:function(){debug.projection.trace("#bindEvents");Projection.__super__.bindEvents.call(this);var that=this;that.ee.once("beforeGetBody",function(){debug.projection.trace("beforeGetBody");that.rel.each(function(tuple){var newTuple=new Tuple;newTuple.copy(tuple,that.args);that.add(newTuple)},that)});that.ee.once("beforeGetHeader",function(){debug.projection.trace("beforeGetHeader");that.header().copy(that.rel.header().project(that.args))})}});module.exports=Projection},{"./../Header.js":5,"./../Relation.js":8,"./../Tuple.js":10,"./../helpers/debug":83,lodash:104}],20:[function(require,module,exports){var Relation=require("./../Relation.js");var Tuple=require("./../Tuple.js");var Set=require("./../Set.js");var _=require("lodash");var debug=require("./../helpers/debug");var Rename=Relation.extend({constructor:function(relation,args){this.relation=relation;this.args=args;Relation.call(this)},bindEvents:function(){debug.rename.trace("#bindEvents");Rename.__super__.bindEvents.call(this);var that=this;that.ee.once("beforeGetBody",function(){debug.rename.trace("beforeGetBody");that.relation.each(function(tuple){var newTuple=tuple.clone();_.forIn(that.args,function(value,key){if(value!==key){newTuple.set(value,newTuple.get(key));delete newTuple.attributes[key]}});that.add(newTuple,false)})});that.ee.once("beforeGetHeader",function(){debug.rename.trace("beforeGetHeader");that.header().copy(that.relation.header().rename(that.args))})}},{});module.exports=Rename},{"./../Relation.js":8,"./../Set.js":9,"./../Tuple.js":10,"./../helpers/debug":83,lodash:104}],21:[function(require,module,exports){var Relation=require("./../Relation.js");var Header=require("./../Header.js");var _=require("lodash");var debug=require("./../helpers/debug");var Function=require("./../Function.js");var Restriction=Relation.extend({constructor:function(relation,predicate){this.rel=relation;this.predicate=predicate;Relation.call(this)},bindEvents:function(){debug.restriction.trace("#bindEvents");Restriction.__super__.bindEvents.call(this);var that=this;that.ee.once("beforeGetBody",function(){that.header();debug.restriction.trace("beforeGetBody");if(that.predicate instanceof Function){that.predicate.convertAttributeToTuple();that.rel.each(function(tuple){if(that.predicate.assignTuple(tuple).value()===true){that.add(tuple.clone(),false)}},that)}else if(_.isFunction(that.predicate)){that.rel.each(function(tuple){if(that.predicate(tuple)){that.add(tuple.clone(),false)}})}else{throw new TypeError("Unsupported predicate type")}});that.ee.once("beforeGetHeader",function(){debug.restriction.trace("beforeGetHeader");that.header().copy(that.rel.header())})}});module.exports=Restriction},{"./../Function.js":4,"./../Header.js":5,"./../Relation.js":8,"./../helpers/debug":83,lodash:104}],22:[function(require,module,exports){var Relation=require("./../Relation.js");var Header=require("./../Header.js");var Tuple=require("./../Tuple.js");var _=require("lodash");var debug=require("./../helpers/debug");var equal=require("./../helpers/equal");var SemiDifference=Relation.extend({constructor:function(relationA,relationB){debug.semiDifference.trace("#constructor");this.rels=[relationA,relationB];Relation.call(this)},bindEvents:function(){debug.semiDifference.trace("#bindEvents");SemiDifference.__super__.bindEvents.call(this);var that=this;this.ee.once("beforeGetHeader",function(){debug.semiDifference.trace("beforeGetHeader");Header.assertSameNameSameType(that.rels[0].header(),that.rels[1].header());that.commonAttributes=that.rels[0].header().setIntersection(that.rels[1].header());that.header().copy(that.rels[0].header())});this.ee.once("beforeGetBody",function(){that.header();debug.semiDifference.trace("beforeGetBody");var rel1=that.rels[0];var rel2=that.rels[1];rel1.each(function(tuple1){var counterpart=false;if(that.commonAttributes.length()>0){rel2.each(function(tuple2){var match=Tuple.matchOnAttributes(tuple1,tuple2,that.commonAttributes);if(match){counterpart=true;return false}})}if(!counterpart){that.add(tuple1.clone(),false)}})})}});module.exports=SemiDifference},{"./../Header.js":5,"./../Relation.js":8,"./../Tuple.js":10,"./../helpers/debug":83,"./../helpers/equal":84,lodash:104}],23:[function(require,module,exports){var Relation=require("./../Relation.js");var Header=require("./../Header.js");var Tuple=require("./../Tuple.js");var _=require("lodash");var debug=require("./../helpers/debug");var equal=require("./../helpers/equal");var SemiJoin=Relation.extend({constructor:function(relationA,relationB){debug.semiJoin.trace("#constructor");this.rels=[relationA,relationB];Relation.call(this)},bindEvents:function(){debug.semiJoin.trace("#bindEvents");SemiJoin.__super__.bindEvents.call(this);var that=this;this.ee.once("beforeGetHeader",function(){debug.semiJoin.trace("beforeGetHeader");Header.assertSameNameSameType(that.rels[0].header(),that.rels[1].header());that.commonAttributes=that.rels[0].header().setIntersection(that.rels[1].header());that.header().copy(that.rels[0].header())});this.ee.once("beforeGetBody",function(){debug.semiJoin.trace("beforeGetBody");var relation1=that.rels[0];var relation2=that.rels[1];relation1.each(function(tuple1){var counterpart=false;if(that.commonAttributes.length()>0){relation2.each(function(tuple2){var match=Tuple.matchOnAttributes(tuple1,tuple2,that.commonAttributes);if(match){counterpart=true;return false}})}if(counterpart){that.add(tuple1.clone(),false)}})})}});module.exports=SemiJoin},{"./../Header.js":5,"./../Relation.js":8,"./../Tuple.js":10,"./../helpers/debug":83,"./../helpers/equal":84,lodash:104}],24:[function(require,module,exports){module.exports=require(22)},{"./../Header.js":5,"./../Relation.js":8,"./../Tuple.js":10,"./../helpers/debug":83,"./../helpers/equal":84,lodash:104}],25:[function(require,module,exports){module.exports=require(23)},{"./../Header.js":5,"./../Relation.js":8,"./../Tuple.js":10,"./../helpers/debug":83,"./../helpers/equal":84,lodash:104}],26:[function(require,module,exports){var Relation=require("./../Relation.js");var Header=require("./../Header.js");var Tuple=require("./../Tuple.js");var Attribute=require("./../Attribute.js");var _=require("lodash");var debug=require("./../helpers/debug");var Summarize=Relation.extend({constructor:function(relation,attributes,summaries){this.args={};this.args.relation=relation;this.args.attributes=attributes;this.args.summaries=summaries;Relation.call(this)},bindEvents:function(){debug.semiJoin.trace("#bindEvents");Summarize.__super__.bindEvents.call(this);var that=this;that.ee.once("beforeGetHeader",function(){var relation=that.args.relation;var header=relation.header();var attributes=that.args.attributes;var summaries=that.args.summaries;Header.assertAttributesExist(header,attributes);that.header().copy(relation.header(),attributes);_.forEach(summaries,function(summary){var summaryName=Object.keys(summary)[0];var summaryExpression=summary[summaryName];var summaryType=summaryExpression.type();var newAttribute=new Attribute({name:summaryName,type:summaryType});that.header().add(newAttribute)})});that.ee.once("beforeGetBody",function(){var relation=that.args.relation;var header=relation.header();var attributes=that.args.attributes;var summaries=that.args.summaries;var instanceAttributes=new Header;instanceAttributes.copy(header,attributes);var otherAttributes=header.setDifference(instanceAttributes);var otherAttributeNames=[];otherAttributes.each(function(otherAttribute){otherAttributeNames.push(otherAttribute.name)});var grouped=relation.group("___grouped___",otherAttributeNames);grouped.each(function(groupedTuple){var newTuple=new Tuple;newTuple.copy(groupedTuple,attributes);var groupedRelation=groupedTuple.get("___grouped___");_.forEach(summaries,function(summary){var summaryName=Object.keys(summary)[0];var summaryExpression=summary[summaryName];summaryExpression.relation=groupedRelation;var summaryValue=summaryExpression.value();newTuple.set(summaryName,summaryValue)});that.add(newTuple)})})}});module.exports=Summarize},{"./../Attribute.js":2,"./../Header.js":5,"./../Relation.js":8,"./../Tuple.js":10,"./../helpers/debug":83,lodash:104}],27:[function(require,module,exports){var Relation=require("./../Relation.js");var Header=require("./../Header.js");var Tuple=require("./../Tuple.js");var _=require("lodash");var debug=require("./../helpers/debug");var Ungroup=Relation.extend({constructor:function(relation,groupedAttributes){debug.ungroup.trace("#constructor");this.relation=relation;this.groupedAttributeNames=groupedAttributes;Relation.call(this)},bindEvents:function(){debug.ungroup.trace("#bindEvents");Ungroup.__super__.bindEvents.call(this);var that=this;this.ee.once("beforeGetHeader",function(){debug.ungroup.trace("beforeGetHeader");_.forEach(that.groupedAttributeNames,function(groupedAttributeName){var relationHeader=that.relation.header().get(groupedAttributeName).relationHeader;that.header().copy(relationHeader)});that.relation.header().each(function(attribute){var grouped=_.any(that.groupedAttributeNames,function(groupedAttributeName){return groupedAttributeName===attribute.name});if(!grouped){that.header().add(attribute.clone())}})});this.ee.once("beforeGetBody",function(){debug.ungroup.trace("beforeGetBody");that.relation.each(function(tuple){_.forEach(that.groupedAttributeNames,function(groupedAttributeName){tuple.get(groupedAttributeName).each(function(nestedTuple){var newTuple=new Tuple;newTuple.copy(tuple,that.groupedAttributeNames,true);newTuple.copy(nestedTuple);that.add(newTuple,false)})})})})}});module.exports=Ungroup},{"./../Header.js":5,"./../Relation.js":8,"./../Tuple.js":10,"./../helpers/debug":83,lodash:104}],28:[function(require,module,exports){var Relation=require("./../Relation.js");var Header=require("./../Header.js");var _=require("lodash");var debug=require("./../helpers/debug");var Union=Relation.extend({constructor:function(relationA,relationB){this.rels=[relationA,relationB];Relation.call(this)},bindEvents:function(){debug.union.trace("#bindEvents");Union.__super__.bindEvents.call(this);var that=this;that.ee.once("beforeGetBody",function(){debug.union.trace("beforeGetBody");_.forEach(that.rels,function(relation){relation.each(function(tuple){that.add(tuple.clone())})},that)});that.ee.once("beforeGetHeader",function(){debug.union.trace("beforeGetHeader");Header.assertUnionCompatible(that.rels[0].header(),that.rels[1].header());that.header().copy(that.rels[0].header())})}});module.exports=Union},{"./../Header.js":5,"./../Relation.js":8,"./../helpers/debug":83,lodash:104}],29:[function(require,module,exports){var Relation=require("./../Relation.js");var Header=require("./../Header.js");var Tuple=require("./../Tuple.js");var Set=require("./../Set.js");var Attribute=require("./../Attribute.js");var _=require("lodash");var debug=require("./../helpers/debug");var Unwrap=Relation.extend({constructor:function(relation,attributeNames){debug.unwrap.trace("#constructor");if(!(relation instanceof Relation)){throw new TypeError("Specified relation is of wrong type")}if(_.isString(attributeNames)){attributeNames=[attributeNames]}if(!_.isArray(attributeNames)&&!(attributeNames instanceof Set)){throw new Error("Unsupported type of specified attributeNames to unwrap")}if(_.isArray(attributeNames)&&attributeNames.length<=0){throw new Error("You must specify attributes to unwrap!")}if(attributeNames instanceof Set&&attributeNames.length()<=0){throw new Error("You must specify attributes to unwrap!")}this.attributeNames=attributeNames;this.relation=relation;Relation.call(this)},bindEvents:function(){debug.unwrap.trace("#bindEvents");Unwrap.__super__.bindEvents.call(this);var relation=this.relation;var that=this;this.ee.once("beforeGetHeader",function(){debug.unwrap.trace("beforeGetHeader");that.header().copy(relation.header(),that.attributeNames,true);var alreadyWrappedAttributes=new Header;relation.header().each(function(attribute){if(attribute.wrappedAttributes){alreadyWrappedAttributes.add(attribute.clone())}});var unwrappedAttributes=new Header;unwrappedAttributes.copy(relation.header(),that.attributeNames);that.unwrappedAttributes=unwrappedAttributes;var nonUnwrappedAttributes=new Header;nonUnwrappedAttributes.copy(relation.header(),that.attributeNames,true);that.nonUnwrappedAttributes=nonUnwrappedAttributes;if(!unwrappedAttributes.isSubset(alreadyWrappedAttributes)){throw new Error("Specified attributes are not all wrapped attributes. Must specify attributes which are wrapped.")}unwrappedAttributes.each(function(unwrappedAttribute){unwrappedAttribute.wrappedAttributes.each(function(wrappedAttribute){that.header().add(wrappedAttribute.clone())})})});this.ee.once("beforeGetBody",function(){debug.unwrap.trace("beforeGetBody");that.relation.each(function(tuple){var newTuple=new Tuple;that.nonUnwrappedAttributes.each(function(attribute){newTuple.set(attribute.name,tuple.get(attribute.name))});that.unwrappedAttributes.each(function(unwrappedAttribute){unwrappedAttribute.wrappedAttributes.each(function(wrappedAttribute){newTuple.set(wrappedAttribute.name,tuple.get(unwrappedAttribute.name).get(wrappedAttribute.name))})});that.add(newTuple)})})}});module.exports=Unwrap},{"./../Attribute.js":2,"./../Header.js":5,"./../Relation.js":8,"./../Set.js":9,"./../Tuple.js":10,"./../helpers/debug":83,lodash:104}],30:[function(require,module,exports){var Relation=require("./../Relation.js");
var Set=require("./../Set.js");var Header=require("./../Header.js");var Attribute=require("./../Attribute.js");var Tuple=require("./../Tuple.js");var _=require("lodash");var debug=require("./../helpers/debug");var Wrap=Relation.extend({constructor:function(relationA,wrappingAttributeName,wrappedAttributes){debug.wrap.trace("#constructor");this.relation=relationA;Attribute.assertValidName(wrappingAttributeName);if(!_.isArray(wrappedAttributes)&&!(wrappedAttributes instanceof Set)){throw new Error("Wrapped attributes must be an array or set of attributes / attribute names")}if(_.isArray(wrappedAttributes)&&wrappedAttributes.length<=0){throw new Error("There must be at least one attribute to wrap")}if(wrappedAttributes instanceof Set&&wrappedAttributes.length()<=0){throw new Error("There must be at least one attribute to wrap")}this.wrappedAttributeName=wrappingAttributeName;this.wrappedAttributes=wrappedAttributes;Relation.call(this)},bindEvents:function(){debug.wrap.trace("#bindEvents");Wrap.__super__.bindEvents.call(this);var that=this;this.ee.once("beforeGetHeader",function(){debug.wrap.trace("beforeGetHeader");Header.assertAttributesExist(that.relation,that.wrappedAttributes);var wrappedAttributes=new Header;wrappedAttributes.copy(that.relation.header(),that.wrappedAttributes);that.wrappedAttributes=wrappedAttributes;that.nonWrappedAttributes=new Header;that.nonWrappedAttributes.copy(that.relation.header(),that.wrappedAttributes,true);that.header().copy(that.nonWrappedAttributes);var newWrappedAttribute=new Attribute({name:that.wrappedAttributeName,type:Tuple});newWrappedAttribute.wrappedAttributes=that.wrappedAttributes;that.header().add(newWrappedAttribute)});this.ee.once("beforeGetBody",function(){debug.wrap.trace("beforeGetBody");that.relation.each(function(tuple){var newTuple=new Tuple;newTuple.copy(tuple,that.nonWrappedAttributes);var nestedTuple=new Tuple;nestedTuple.copy(tuple,that.wrappedAttributes);newTuple.set(that.wrappedAttributeName,nestedTuple);that.add(newTuple)})})}});module.exports=Wrap},{"./../Attribute.js":2,"./../Header.js":5,"./../Relation.js":8,"./../Set.js":9,"./../Tuple.js":10,"./../helpers/debug":83,lodash:104}],31:[function(require,module,exports){var Function=require("./../../Function");var Boolean=require("./../../types/Boolean.js");var _=require("lodash");var All=Function.extend({constructor:function(relation,predicate){Function.apply(this,Array.prototype.slice.call(arguments,0));this.name="All";this.predicate=predicate;this.relation=relation;this.type(Boolean)},value:function(){var relation=this.relation;var predicate=this.predicate;var result=true;predicate.convertAttributeToTuple();relation.each(function(tuple){predicate.assignTuple(tuple);if(predicate.value()===false){result=false;return false}});return result}});module.exports=All},{"./../../Function":4,"./../../types/Boolean.js":94,lodash:104}],32:[function(require,module,exports){var Function=require("./../../Function");var Boolean=require("./../../types/Boolean.js");var _=require("lodash");var Any=Function.extend({constructor:function(relation,predicate){Function.apply(this,Array.prototype.slice.call(arguments,0));this.name="Any";this.type(Boolean);this.relation=relation;this.predicate=predicate},value:function(){var relation=this.relation;var predicate=this.predicate;var result=false;predicate.convertAttributeToTuple();relation.each(function(tuple){predicate.assignTuple(tuple);if(predicate.value()===true){result=true;return false}});return result}});module.exports=Any},{"./../../Function":4,"./../../types/Boolean.js":94,lodash:104}],33:[function(require,module,exports){var Function=require("./../../Function");var Float=require("./../../types/Float.js");var _=require("lodash");var Average=Function.extend({constructor:function(attribute){Function.apply(this,Array.prototype.slice.call(arguments,0));this.name="Average";this.type(Float);this.attribute=attribute;this.relation=attribute.header.relation},value:function(){var attribute=this.attribute;var relation=this.relation;var result=0;var length=relation.length();relation.each(function(tuple){result+=tuple.get(attribute.name)});result=result/length;return result}});module.exports=Average},{"./../../Function":4,"./../../types/Float.js":96,lodash:104}],34:[function(require,module,exports){var Function=require("./../../Function");var Integer=require("./../../types/Integer.js");var _=require("lodash");var Count=Function.extend({constructor:function(relation){Function.apply(this,Array.prototype.slice.call(arguments,0));this.name="Count";this.type(Integer);this.relation=relation},value:function(){return this.relation.length()}});module.exports=Count},{"./../../Function":4,"./../../types/Integer.js":97,lodash:104}],35:[function(require,module,exports){var Function=require("./../../Function");var compare=require("./../../helpers/compare.js");var Integer=require("./../../types/Integer.js");var Maximum=Function.extend({constructor:function(attribute){Function.apply(this,Array.prototype.slice.call(arguments,0));this.name="Maximum";this.type(Integer);this.attribute=attribute;this.relation=attribute.header.relation},value:function(){var relation=this.relation;var attribute=this.attribute;var type=this.attribute.type;var max=null;relation.each(function(tuple){var value=tuple.get(attribute.name);if(max===null){max=value}else if(compare(type,value,max)>0){max=value}});return max}});module.exports=Maximum},{"./../../Function":4,"./../../helpers/compare.js":82,"./../../types/Integer.js":97}],36:[function(require,module,exports){var Function=require("./../../Function");var compare=require("./../../helpers/compare.js");var Integer=require("./../../types/Integer.js");var Minimum=Function.extend({constructor:function(attribute){Function.apply(this,Array.prototype.slice.call(arguments,0));this.name="Minimum";this.type(Integer);this.attribute=attribute;this.relation=attribute.header.relation},value:function(){var relation=this.relation;var attribute=this.attribute;var type=this.attribute.type;var min=null;relation.each(function(tuple){var value=tuple.get(attribute.name);if(min===null){min=value}else if(compare(type,value,min)<0){min=value}});return min}});module.exports=Minimum},{"./../../Function":4,"./../../helpers/compare.js":82,"./../../types/Integer.js":97}],37:[function(require,module,exports){var Function=require("./../../Function");var Float=require("./../../types/Float.js");var Variance=require("./Variance.js");var StandardDeviation=Function.extend({constructor:function(attribute){Function.apply(this,Array.prototype.slice.call(arguments,0));this.name="StandardDeviation";this.type(Float);this.attribute=attribute},value:function(){var attribute=this.attribute;var variance=new Variance(attribute).value();return Math.sqrt(variance)}});module.exports=StandardDeviation},{"./../../Function":4,"./../../types/Float.js":96,"./Variance.js":39}],38:[function(require,module,exports){var Function=require("./../../Function");var Float=require("./../../types/Float.js");var Sum=Function.extend({constructor:function(attribute){Function.apply(this,Array.prototype.slice.call(arguments,0));this.name="Sum";this.type(Float);this.attribute=attribute;this.relation=attribute.header.relation},value:function(){var relation=this.relation;var attributeName=this.attribute.name;var sum=0;relation.each(function(tuple){sum+=tuple.get(attributeName)});return sum}});module.exports=Sum},{"./../../Function":4,"./../../types/Float.js":96}],39:[function(require,module,exports){var Function=require("./../../Function");var Average=require("./Average.js");var Float=require("./../../types/Float.js");var Variance=Function.extend({constructor:function(attribute){Function.apply(this,Array.prototype.slice.call(arguments,0));this.name="Sum";this.type(Float);this.attribute=attribute;this.relation=attribute.header.relation},value:function(){var attribute=this.attribute;var relation=this.relation;var attributeName=this.attribute.name;var average=new Average(attribute).value();var length=relation.length();var totalVariance=0;relation.each(function(tuple){var value=tuple.get(attributeName);totalVariance+=Math.pow(value-average,2)});return totalVariance/length}});module.exports=Variance},{"./../../Function":4,"./../../types/Float.js":96,"./Average.js":33}],40:[function(require,module,exports){var Function=require("./../../Function.js");var TBoolean=require("./../../types/Boolean.js");var _=require("lodash");var equal=require("./../../helpers/equal");var FEqual=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.name="Equals";this.type(TBoolean)},value:function(){return equal(null,this.parameters[0],this.parameters[1])}});module.exports=FEqual},{"./../../Function.js":4,"./../../helpers/equal":84,"./../../types/Boolean.js":94,lodash:104}],41:[function(require,module,exports){var Function=require("./../../Function.js");var TBoolean=require("./../../types/Boolean.js");var _=require("lodash");var compare=require("./../../helpers/compare");var GreaterThan=Function.extend({constructor:function(){Function.apply(this,arguments);this.name="GreaterThan";this.type(TBoolean)},value:function(){return compare(null,this.parameters[0],this.parameters[1])>0}},{});module.exports=GreaterThan},{"./../../Function.js":4,"./../../helpers/compare":82,"./../../types/Boolean.js":94,lodash:104}],42:[function(require,module,exports){var Function=require("./../../Function.js");var compare=require("./../../helpers/compare");var TBoolean=require("./../../types/Boolean.js");var _=require("lodash");var FLargerThanEqual=Function.extend({constructor:function(){Function.apply(this,arguments);this.name="GreaterThanEqual";this.type(TBoolean)},value:function(){return compare(null,this.parameters[0],this.parameters[1])>=0}},{});module.exports=FLargerThanEqual},{"./../../Function.js":4,"./../../helpers/compare":82,"./../../types/Boolean.js":94,lodash:104}],43:[function(require,module,exports){var Function=require("./../../Function.js");var compare=require("./../../helpers/compare");var TBoolean=require("./../../types/Boolean.js");var _=require("lodash");var FSmallerThan=Function.extend({constructor:function(){Function.apply(this,arguments);this.name="SmallerThan";this.type(TBoolean)},value:function(){return compare(null,this.parameters[0],this.parameters[1])<0}},{});module.exports=FSmallerThan},{"./../../Function.js":4,"./../../helpers/compare":82,"./../../types/Boolean.js":94,lodash:104}],44:[function(require,module,exports){var Function=require("./../../Function.js");var compare=require("./../../helpers/compare");var TBoolean=require("./../../types/Boolean.js");var _=require("lodash");var FSmallerThanEqual=Function.extend({constructor:function(){Function.apply(this,arguments);this.name="SmallerThanEqual";this.type(TBoolean)},value:function(){return compare(null,this.parameters[0],this.parameters[1])<=0}},{});module.exports=FSmallerThanEqual},{"./../../Function.js":4,"./../../helpers/compare":82,"./../../types/Boolean.js":94,lodash:104}],45:[function(require,module,exports){var Function=require("./../../Function.js");var TBoolean=require("./../../types/Boolean.js");var _=require("lodash");var And=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TBoolean);this.name="And"},value:function(){return _.every(this.parameters,function(parameter){if(!_.isBoolean(parameter)){parameter=parameter.value()}return parameter})}},{});module.exports=And},{"./../../Function.js":4,"./../../types/Boolean.js":94,lodash:104}],46:[function(require,module,exports){var Function=require("./../../Function.js");var TBoolean=require("./../../types/Boolean.js");var _=require("lodash");var Not=Function.extend({constructor:function(){Function.apply(this,arguments);this.type(TBoolean);this.name="Not"},value:function(){if(!_.isBoolean(this.parameters[0])){return!this.parameters[0].value()}return!this.parameters[0]}},{});module.exports=Not},{"./../../Function.js":4,"./../../types/Boolean.js":94,lodash:104}],47:[function(require,module,exports){var Function=require("./../../Function.js");var TBoolean=require("./../../types/Boolean.js");var _=require("lodash");var Or=Function.extend({constructor:function(){Function.apply(this,arguments);this.type(TBoolean);this.name="Or"},value:function(){return _.any(this.parameters,function(parameter){if(!_.isBoolean(parameter)){parameter=parameter.value()}return parameter})}},{});module.exports=Or},{"./../../Function.js":4,"./../../types/Boolean.js":94,lodash:104}],48:[function(require,module,exports){var Function=require("./../../Function.js");var TInteger=require("./../../types/Integer.js");var value=require("./../../helpers/value");var FDayOfMonth=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TInteger);this.name="DayOfMonth"},value:function(){return value(this.parameters[0]).getDate()}},{});module.exports=FDayOfMonth},{"./../../Function.js":4,"./../../helpers/value":86,"./../../types/Integer.js":97}],49:[function(require,module,exports){var Function=require("./../../Function.js");var TInteger=require("./../../types/Integer.js");var value=require("./../../helpers/value");var FDayOfWeek=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TInteger);this.name="DayOfWeek"},value:function(){return value(this.parameters[0]).getDay()}},{});module.exports=FDayOfWeek},{"./../../Function.js":4,"./../../helpers/value":86,"./../../types/Integer.js":97}],50:[function(require,module,exports){var Function=require("./../../Function.js");var TInteger=require("./../../types/Integer.js");var value=require("./../../helpers/value");var FDayOfYear=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TInteger);this.name="DayOfYear"},value:function(){var date=value(this.parameters[0]);var begin=new Date(date.getFullYear(),0,1);return Math.ceil((date-begin)/864e5)}},{});module.exports=FDayOfYear},{"./../../Function.js":4,"./../../helpers/value":86,"./../../types/Integer.js":97}],51:[function(require,module,exports){var Function=require("./../../Function.js");var TInteger=require("./../../types/Integer.js");var value=require("./../../helpers/value");var FHours=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TInteger);this.name="Hours"},value:function(){return value(this.parameters[0]).getHours()}},{});module.exports=FHours},{"./../../Function.js":4,"./../../helpers/value":86,"./../../types/Integer.js":97}],52:[function(require,module,exports){var Function=require("./../../Function.js");var TInteger=require("./../../types/Integer.js");var value=require("./../../helpers/value");var FMilliseconds=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TInteger);this.name="Milliseconds"},value:function(){return value(this.parameters[0]).getMilliseconds()}},{});module.exports=FMilliseconds},{"./../../Function.js":4,"./../../helpers/value":86,"./../../types/Integer.js":97}],53:[function(require,module,exports){var Function=require("./../../Function.js");var TInteger=require("./../../types/Integer.js");var value=require("./../../helpers/value");var FMinutes=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TInteger);this.name="Minutes"},value:function(){return value(this.parameters[0]).getMinutes()}},{});module.exports=FMinutes},{"./../../Function.js":4,"./../../helpers/value":86,"./../../types/Integer.js":97}],54:[function(require,module,exports){var Function=require("./../../Function.js");var TInteger=require("./../../types/Integer.js");var value=require("./../../helpers/value");var FMonth=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TInteger);this.name="Month"},value:function(){return value(this.parameters[0]).getMonth()}},{});module.exports=FMonth},{"./../../Function.js":4,"./../../helpers/value":86,"./../../types/Integer.js":97}],55:[function(require,module,exports){var Function=require("./../../Function.js");var TInteger=require("./../../types/Integer.js");var value=require("./../../helpers/value");var Seconds=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TInteger);this.name="Seconds"},value:function(){return value(this.parameters[0]).getSeconds()}},{});module.exports=Seconds},{"./../../Function.js":4,"./../../helpers/value":86,"./../../types/Integer.js":97}],56:[function(require,module,exports){var Function=require("./../../Function.js");var Integer=require("./../../types/Integer.js");var value=require("./../../helpers/value");var Timestamp=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(Integer);this.name="Timestamp"},value:function(){var param=value(this.parameters[0]);return value(this.parameters[0]).getTime()}},{});module.exports=Timestamp},{"./../../Function.js":4,"./../../helpers/value":86,"./../../types/Integer.js":97}],57:[function(require,module,exports){var Function=require("./../../Function.js");var TInteger=require("./../../types/Integer.js");var value=require("./../../helpers/value");var WeekOfYear=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TInteger);this.name="WeekOfYear"},value:function(){var d=new Date(+value(this.parameters[0]));d.setHours(0,0,0);d.setDate(d.getDate()+4-(d.getDay()||7));return Math.ceil(((d-new Date(d.getFullYear(),0,1))/864e5+1)/7)}},{});module.exports=WeekOfYear},{"./../../Function.js":4,"./../../helpers/value":86,"./../../types/Integer.js":97}],58:[function(require,module,exports){var Function=require("./../../Function.js");var TInteger=require("./../../types/Integer.js");var value=require("./../../helpers/value");var Year=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TInteger);this.name="Year"},value:function(){return value(this.parameters[0]).getFullYear()}},{});module.exports=Year},{"./../../Function.js":4,"./../../helpers/value":86,"./../../types/Integer.js":97}],59:[function(require,module,exports){var Function=require("./../../Function.js");var TNumeric=require("./../../types/Numeric.js");var value=require("./../../helpers/value");var Absolute=Function.extend({constructor:function(param){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TNumeric);this.name="Absolute"},value:function(){return Math.abs(value(this.parameters[0]))}});Absolute.mixin(require("./../../mixins/numeric"));Absolute.mixin(require("./../../mixins/comparable"));Absolute.mixin(require("./../../mixins/size-comparable"));module.exports=Absolute},{"./../../Function.js":4,"./../../helpers/value":86,"./../../mixins/comparable":87,"./../../mixins/numeric":91,"./../../mixins/size-comparable":92,"./../../types/Numeric.js":98}],60:[function(require,module,exports){var Function=require("./../../Function.js");var TNumeric=require("./../../types/Numeric.js");var value=require("./../../helpers/value");var FCeil=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TNumeric);this.name="Ceil"},value:function(){return Math.ceil(value(this.parameters[0]))}});FCeil.mixin(require("./../../mixins/numeric"));FCeil.mixin(require("./../../mixins/comparable"));FCeil.mixin(require("./../../mixins/size-comparable"));module.exports=FCeil},{"./../../Function.js":4,"./../../helpers/value":86,"./../../mixins/comparable":87,"./../../mixins/numeric":91,"./../../mixins/size-comparable":92,"./../../types/Numeric.js":98}],61:[function(require,module,exports){var Function=require("./../../Function.js");var Numeric=require("./../../types/Numeric.js");var value=require("./../../helpers/value");var Cosine=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(Numeric);this.name="Cos"},value:function(){return Math.cos(value(this.parameters[0]))}});Cosine.mixin(require("./../../mixins/numeric"));Cosine.mixin(require("./../../mixins/comparable"));Cosine.mixin(require("./../../mixins/size-comparable"));module.exports=Cosine},{"./../../Function.js":4,"./../../helpers/value":86,"./../../mixins/comparable":87,"./../../mixins/numeric":91,"./../../mixins/size-comparable":92,"./../../types/Numeric.js":98}],62:[function(require,module,exports){var Function=require("./../../Function.js");var TNumeric=require("./../../types/Numeric.js");var value=require("./../../helpers/value");var FDivision=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TNumeric);this.name="Division"},value:function(){return value(this.parameters[0])/value(this.parameters[1])}});FDivision.mixin(require("./../../mixins/numeric"));FDivision.mixin(require("./../../mixins/comparable"));FDivision.mixin(require("./../../mixins/size-comparable"));module.exports=FDivision},{"./../../Function.js":4,"./../../helpers/value":86,"./../../mixins/comparable":87,"./../../mixins/numeric":91,"./../../mixins/size-comparable":92,"./../../types/Numeric.js":98}],63:[function(require,module,exports){var Function=require("./../../Function.js");var TNumeric=require("./../../types/Numeric.js");var value=require("./../../helpers/value");var FExp=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TNumeric);this.name="Exponent"},value:function(){return Math.exp(value(this.parameters[0]))}});FExp.mixin(require("./../../mixins/numeric"));FExp.mixin(require("./../../mixins/comparable"));FExp.mixin(require("./../../mixins/size-comparable"));module.exports=FExp},{"./../../Function.js":4,"./../../helpers/value":86,"./../../mixins/comparable":87,"./../../mixins/numeric":91,"./../../mixins/size-comparable":92,"./../../types/Numeric.js":98}],64:[function(require,module,exports){var Function=require("./../../Function.js");var TNumeric=require("./../../types/Numeric.js");var value=require("./../../helpers/value");var Floor=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TNumeric);this.name="Floor"},value:function(){return Math.floor(value(this.parameters[0]))}});Floor.mixin(require("./../../mixins/numeric"));Floor.mixin(require("./../../mixins/comparable"));Floor.mixin(require("./../../mixins/size-comparable"));module.exports=Floor},{"./../../Function.js":4,"./../../helpers/value":86,"./../../mixins/comparable":87,"./../../mixins/numeric":91,"./../../mixins/size-comparable":92,"./../../types/Numeric.js":98}],65:[function(require,module,exports){var Function=require("./../../Function.js");var TNumeric=require("./../../types/Numeric.js");var value=require("./../../helpers/value");var type=require("./../../helpers/type");var FMinus=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(type(this.parameters[0]));this.name="Minus"},value:function(){return this.type().coerce(value(this.parameters[0])-value(this.parameters[1]))}});FMinus.mixin(require("./../../mixins/numeric"));FMinus.mixin(require("./../../mixins/comparable"));FMinus.mixin(require("./../../mixins/size-comparable"));module.exports=FMinus},{"./../../Function.js":4,"./../../helpers/type":85,"./../../helpers/value":86,"./../../mixins/comparable":87,"./../../mixins/numeric":91,"./../../mixins/size-comparable":92,"./../../types/Numeric.js":98}],66:[function(require,module,exports){var Function=require("./../../Function.js");var TNumeric=require("./../../types/Numeric.js");var value=require("./../../helpers/value");var FModulo=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TNumeric);this.name="Modulo"},value:function(){return value(this.parameters[0])%value(this.parameters[1])}});FModulo.mixin(require("./../../mixins/numeric"));FModulo.mixin(require("./../../mixins/comparable"));FModulo.mixin(require("./../../mixins/size-comparable"));module.exports=FModulo},{"./../../Function.js":4,"./../../helpers/value":86,"./../../mixins/comparable":87,"./../../mixins/numeric":91,"./../../mixins/size-comparable":92,"./../../types/Numeric.js":98}],67:[function(require,module,exports){var Function=require("./../../Function.js");var TNumeric=require("./../../types/Numeric.js");var value=require("./../../helpers/value");var FMultiplication=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TNumeric);this.name="Multiplication"},value:function(){return value(this.parameters[0])*value(this.parameters[1])}});FMultiplication.mixin(require("./../../mixins/numeric"));FMultiplication.mixin(require("./../../mixins/comparable"));FMultiplication.mixin(require("./../../mixins/size-comparable"));module.exports=FMultiplication},{"./../../Function.js":4,"./../../helpers/value":86,"./../../mixins/comparable":87,"./../../mixins/numeric":91,"./../../mixins/size-comparable":92,"./../../types/Numeric.js":98}],68:[function(require,module,exports){var Function=require("./../../Function.js");var TNumeric=require("./../../types/Numeric.js");var value=require("./../../helpers/value");var type=require("./../../helpers/type");var Plus=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(this.parameters[0]);this.name="Plus"},value:function(){return this.type().coerce(value(this.parameters[0])+value(this.parameters[1]))}});Plus.mixin(require("./../../mixins/numeric"));Plus.mixin(require("./../../mixins/comparable"));Plus.mixin(require("./../../mixins/size-comparable"));module.exports=Plus},{"./../../Function.js":4,"./../../helpers/type":85,"./../../helpers/value":86,"./../../mixins/comparable":87,"./../../mixins/numeric":91,"./../../mixins/size-comparable":92,"./../../types/Numeric.js":98}],69:[function(require,module,exports){var Function=require("./../../Function.js");var TNumeric=require("./../../types/Numeric.js");var value=require("./../../helpers/value");var FPow=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TNumeric);this.name="Power"},value:function(){return Math.pow(value(this.parameters[0]),value(this.parameters[1]))}});FPow.mixin(require("./../../mixins/numeric"));FPow.mixin(require("./../../mixins/comparable"));FPow.mixin(require("./../../mixins/size-comparable"));module.exports=FPow},{"./../../Function.js":4,"./../../helpers/value":86,"./../../mixins/comparable":87,"./../../mixins/numeric":91,"./../../mixins/size-comparable":92,"./../../types/Numeric.js":98}],70:[function(require,module,exports){var Function=require("./../../Function.js");var TNumeric=require("./../../types/Numeric.js");var value=require("./../../helpers/value");var Round=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TNumeric);this.name="Round"},value:function(){return Math.round(value(this.parameters[0]))}});Round.mixin(require("./../../mixins/numeric"));Round.mixin(require("./../../mixins/comparable"));Round.mixin(require("./../../mixins/size-comparable"));module.exports=Round},{"./../../Function.js":4,"./../../helpers/value":86,"./../../mixins/comparable":87,"./../../mixins/numeric":91,"./../../mixins/size-comparable":92,"./../../types/Numeric.js":98}],71:[function(require,module,exports){var Function=require("./../../Function.js");var TNumeric=require("./../../types/Numeric.js");var value=require("./../../helpers/value");var Sine=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TNumeric);this.name="Sine"},value:function(){return Math.sin(value(this.parameters[0]))}});Sine.mixin(require("./../../mixins/numeric"));Sine.mixin(require("./../../mixins/comparable"));Sine.mixin(require("./../../mixins/size-comparable"));module.exports=Sine},{"./../../Function.js":4,"./../../helpers/value":86,"./../../mixins/comparable":87,"./../../mixins/numeric":91,"./../../mixins/size-comparable":92,"./../../types/Numeric.js":98}],72:[function(require,module,exports){var Function=require("./../../Function.js");var TNumeric=require("./../../types/Numeric.js");var value=require("./../../helpers/value");var FSquareRoot=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TNumeric);this.name="Square Root"},value:function(){return Math.sqrt(value(this.parameters[0]))}});FSquareRoot.mixin(require("./../../mixins/numeric"));FSquareRoot.mixin(require("./../../mixins/comparable"));FSquareRoot.mixin(require("./../../mixins/size-comparable"));module.exports=FSquareRoot},{"./../../Function.js":4,"./../../helpers/value":86,"./../../mixins/comparable":87,"./../../mixins/numeric":91,"./../../mixins/size-comparable":92,"./../../types/Numeric.js":98}],73:[function(require,module,exports){var Function=require("./../../Function.js");var TNumeric=require("./../../types/Numeric.js");var value=require("./../../helpers/value");var Tangent=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TNumeric);this.name="Tangent"},value:function(){return Math.tan(value(this.parameters[0]))}});Tangent.mixin(require("./../../mixins/numeric"));Tangent.mixin(require("./../../mixins/comparable"));Tangent.mixin(require("./../../mixins/size-comparable"));module.exports=Tangent},{"./../../Function.js":4,"./../../helpers/value":86,"./../../mixins/comparable":87,"./../../mixins/numeric":91,"./../../mixins/size-comparable":92,"./../../types/Numeric.js":98}],74:[function(require,module,exports){var Function=require("./../../Function.js");var TInteger=require("./../../types/Integer.js");var value=require("./../../helpers/value");var Length=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TInteger);this.name="Length"},value:function(){return value(this.parameters[0]).length}});module.exports=Length},{"./../../Function.js":4,"./../../helpers/value":86,"./../../types/Integer.js":97}],75:[function(require,module,exports){var Function=require("./../../Function.js");var TString=require("./../../types/String.js");var value=require("./../../helpers/value");var Length=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TString);this.name="Lowercase"},value:function(){return value(this.parameters[0]).toLowerCase()}});module.exports=Length},{"./../../Function.js":4,"./../../helpers/value":86,"./../../types/String.js":100}],76:[function(require,module,exports){var Function=require("./../../Function.js");var TString=require("./../../types/String.js");var value=require("./../../helpers/value");var Uppercase=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TString);this.name="Substring"},value:function(){var start=value(this.parameters[1]);var length=value(this.parameters[2]);return value(this.parameters[0]).substr(start,length)}});module.exports=Uppercase},{"./../../Function.js":4,"./../../helpers/value":86,"./../../types/String.js":100}],77:[function(require,module,exports){var Function=require("./../../Function.js");var TString=require("./../../types/String.js");var value=require("./../../helpers/value");var Test=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TString);this.name="Test"},value:function(){var regex=value(this.parameters[1]);return regex.test(value(this.parameters[0]))}});module.exports=Test},{"./../../Function.js":4,"./../../helpers/value":86,"./../../types/String.js":100}],78:[function(require,module,exports){var Function=require("./../../Function.js");
var TString=require("./../../types/String.js");var value=require("./../../helpers/value");var Uppercase=Function.extend({constructor:function(){Function.apply(this,Array.prototype.slice.call(arguments,0));this.type(TString);this.name="Uppercase"},value:function(){return value(this.parameters[0]).toUpperCase()}});module.exports=Uppercase},{"./../../Function.js":4,"./../../helpers/value":86,"./../../types/String.js":100}],79:[function(require,module,exports){var Function=require("./../../Function.js");var Type=require("./../../Type.js");var TBoolean=require("./../../types/Boolean.js");var TupleAttribute=Function.extend({constructor:function(attributeName){Function.apply(this,arguments);this.attributeName=attributeName;this.name="TupleAttribute"},value:function(){var tuple=this.parameters[0];var attributeName=this.attributeName;if(!tuple.attributes.hasOwnProperty(attributeName)){throw new Error('Attribute "'+attributeName+'" does not exist in Tuple')}return tuple.get(attributeName)},assignTuple:function(tuple){this.parameters[0]=tuple}},{});module.exports=TupleAttribute},{"./../../Function.js":4,"./../../Type.js":11,"./../../types/Boolean.js":94}],80:[function(require,module,exports){var _=require("lodash");var clone=function(element){if(element.clone&&_.isFunction(element.clone)){return element.clone()}else{return _.cloneDeep(element)}};module.exports=clone},{lodash:104}],81:[function(require,module,exports){var _=require("lodash");var coerce=function(type,value){if(value instanceof type){return value}else if(type&&_.isFunction(type.coerce)){return type.coerce.apply(this,Array.prototype.slice.call(arguments,1))}else{if(type&&value instanceof type){return value}if(type){var result=new(type.prototype.constructor.bind.apply(type,Array.prototype.slice.call(arguments,0)))}else{result=value}return result}};module.exports=coerce},{lodash:104}],82:[function(require,module,exports){var value=require("./value");var _=require("lodash");var Function=require("./../Function");var Type=require("./../Type");var compare=function(type,value1,value2){value1=value(value1);value2=value(value2);if(value1 instanceof Type){return value1.constructor.compare(value1,value2)}if(value2 instanceof Type){return value2.constructor.compare(value1,value2)}if(value1 instanceof Date){value1=value1.getTime()}if(value2 instanceof Date){value2=value2.getTime()}if(value1===value2){return 0}else if(value1>value2){return 1}else if(value2>value1){return-1}};module.exports=compare},{"./../Function":4,"./../Type":11,"./value":86,lodash:104}],83:[function(require,module,exports){var log4js;try{log4js=require.resolve("log4js");log4js.configure({appenders:[{type:"console"}]});log4js.setGlobalLogLevel(log4js.levels.DEBUG)}catch(e){log4js={};log4js.getLogger=function(){return}}var Set=module.exports.set=log4js.getLogger("Set");var Relation=module.exports.relation=log4js.getLogger("Relation");var Header=module.exports.header=log4js.getLogger("Header");var Compose=module.exports.compose=log4js.getLogger("Compose");var Difference=module.exports.difference=log4js.getLogger("Difference");var Extend=module.exports.extend=log4js.getLogger("Extend");var Group=module.exports.group=log4js.getLogger("Group");var Intersection=module.exports.intersection=log4js.getLogger("Intersection");var Join=module.exports.join=log4js.getLogger("Join");var Product=module.exports.product=log4js.getLogger("Product");var Projection=module.exports.projection=log4js.getLogger("Projection");var Rename=module.exports.rename=log4js.getLogger("Rename");var Restriction=module.exports.restriction=log4js.getLogger("Restriction");var SemiJoin=module.exports.semiJoin=log4js.getLogger("SemiJoin");var SemiDifference=module.exports.semiDifference=log4js.getLogger("SemiDifference");var Ungroup=module.exports.ungroup=log4js.getLogger("Ungroup");var Union=module.exports.union=log4js.getLogger("Union");var Unwrap=module.exports.unwrap=log4js.getLogger("Unwrap");var Wrap=module.exports.wrap=log4js.getLogger("Wrap");var TableDump=module.exports.reldump=log4js.getLogger("TableDump");var Test=module.exports.test=log4js.getLogger("Test")},{}],84:[function(require,module,exports){var value=require("./value");var _=require("lodash");var Function=require("./../Function");var Type=require("./../Type");var equal=function(type,value1,value2){value1=value(value1);value2=value(value2);if(_.isUndefined(value1)&&_.isUndefined(value2)){return true}else if(_.isUndefined(value1)||_.isUndefined(value2)){return false}else if(_.isNull(value1)&&_.isNull(value2)){return true}else if(_.isNull(value1)||_.isNull(value2)){return false}if(value1.constructor&&value1.constructor.equal){return value1.constructor.equal(value1,value2)}if(value2.constructor&&value2.constructor.equal){return value2.constructor.equal(value1,value2)}return _.isEqual(value1,value2)};module.exports=equal},{"./../Function":4,"./../Type":11,"./value":86,lodash:104}],85:[function(require,module,exports){var value=require("./value");var _=require("lodash");var Function=require("./../Function");var Attribute=require("./../Attribute");var Type=require("./../Type");var TBoolean=require("./../types/Boolean");var TString=require("./../types/String");var TDate=require("./../types/Date");var TInteger=require("./../types/Integer");var TNumeric=require("./../types/Numeric");var TFloat=require("./../types/Float");var type=function(thang){if(thang instanceof Attribute){return thang.type}if(thang instanceof Type){return thang.constructor}if(thang instanceof Function){return thang.type()}if(_.isBoolean(thang)){return TBoolean}if(_.isNumber(thang)){return TNumeric}if(_.isDate(thang)){return TDate}};module.exports=type},{"./../Attribute":2,"./../Function":4,"./../Type":11,"./../types/Boolean":94,"./../types/Date":95,"./../types/Float":96,"./../types/Integer":97,"./../types/Numeric":98,"./../types/String":100,"./value":86,lodash:104}],86:[function(require,module,exports){var Function=require("./../Function");var value=function(value){if(value instanceof Function){value=value.value()}return value};module.exports=value},{"./../Function":4}],87:[function(require,module,exports){module.exports.equals=function(attr){var Equal=require("./../functions/comparable/Equal.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Equal(this,attr))}return new Equal(this,attr)};module.exports.eq=function(attr){return module.exports.equals.call(this,attr)}},{"./../functions/comparable/Equal.js":40}],88:[function(require,module,exports){module.exports.and=function(param){var And=require("./../functions/connective/And.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new And(this,param))}return new And(this,param)};module.exports.or=function(){var Or=require("./../functions/connective/Or.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Or(this))}return new Or(this)}},{"./../functions/connective/And.js":45,"./../functions/connective/Or.js":47}],89:[function(require,module,exports){module.exports.dayOfMonth=function(){var DayOfMonth=require("./../functions/date/DayOfMonth.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new DayOfMonth(this))}return new DayOfMonth(this)};module.exports.dayOfWeek=function(){var DayOfWeek=require("./../functions/date/DayOfWeek.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new DayOfWeek(this))}return new DayOfWeek(this)};module.exports.dayOfYear=function(){var DayOfYear=require("./../functions/date/DayOfYear.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new DayOfYear(this))}return new DayOfYear(this)};module.exports.month=function(){var Month=require("./../functions/date/Month.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Month(this))}return new Month(this)};module.exports.ts=function(){var Timestamp=require("./../functions/date/Timestamp.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Timestamp(this))}return new Timestamp(this)};module.exports.weekOfYear=function(){var WeekOfYear=require("./../functions/date/WeekOfYear.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new WeekOfYear(this))}return new WeekOfYear(this)};module.exports.year=function(){var Year=require("./../functions/date/Year.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Year(this))}return new Year(this)};module.exports.hours=function(){var Hours=require("./../functions/date/Hours.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Hours(this))}return new Hours(this)};module.exports.minutes=function(){var Minutes=require("./../functions/date/Minutes.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Minutes(this))}return new Minutes(this)};module.exports.seconds=function(){var Seconds=require("./../functions/date/Seconds.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Seconds(this))}return new Seconds(this)};module.exports.milliseconds=function(){var Milliseconds=require("./../functions/date/Milliseconds.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Milliseconds(this))}return new Milliseconds(this)}},{"./../functions/date/DayOfMonth.js":48,"./../functions/date/DayOfWeek.js":49,"./../functions/date/DayOfYear.js":50,"./../functions/date/Hours.js":51,"./../functions/date/Milliseconds.js":52,"./../functions/date/Minutes.js":53,"./../functions/date/Month.js":54,"./../functions/date/Seconds.js":55,"./../functions/date/Timestamp.js":56,"./../functions/date/WeekOfYear.js":57,"./../functions/date/Year.js":58}],90:[function(require,module,exports){module.exports.not=function(attr){this.negated=true;return this}},{}],91:[function(require,module,exports){module.exports.abs=function(){var Absolute=require("./../functions/numeric/Absolute.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Absolute(this))}return new Absolute(this)};module.exports.ceil=function(attr){var Ceil=require("./../functions/numeric/Ceil.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Ceil(this))}return new Ceil(this)};module.exports.floor=function(attr){var Floor=require("./../functions/numeric/Floor.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Ceil(this))}return new Floor(this)};module.exports.cos=function(attr){var Cos=require("./../functions/numeric/Cosine.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Cos(this))}return new Cos(this)};module.exports.div=function(attr){var Division=require("./../functions/numeric/Division.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Division(this,attr))}return new Division(this,attr)};module.exports.exp=function(){var Exp=require("./../functions/numeric/Exponential.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Exp(this))}return new Exp(this)};module.exports.minus=function(attr){var Minus=require("./../functions/numeric/Minus.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Minus(this,attr))}return new Minus(this,attr)};module.exports.mod=function(attr){var Modulo=require("./../functions/numeric/Modulo.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Modulo(this,attr))}return new Modulo(this,attr)};module.exports.times=function(attr){var Multiplication=require("./../functions/numeric/Multiplication.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Multiplication(this,attr))}return new Multiplication(this,attr)};module.exports.plus=function(attr){var Plus=require("./../functions/numeric/Plus.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Plus(this,attr))}return new Plus(this,attr)};module.exports.pow=function(attr){var Pow=require("./../functions/numeric/Power.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Pow(this,attr))}return new Pow(this,attr)};module.exports.round=function(){var Round=require("./../functions/numeric/Round.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Round(this))}return new Round(this)};module.exports.sin=function(){var Sin=require("./../functions/numeric/Sine.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Sin(this))}return new Sin(this)};module.exports.sqrt=function(){var Sqrt=require("./../functions/numeric/SquareRoot.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Sqrt(this))}return new Sqrt(this)};module.exports.tan=function(){var Tan=require("./../functions/numeric/Tangent.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Tan(this))}return new Tan(this)};module.exports.avg=function(){var Average=require("./../functions/aggregate/Average.js");return new Average(this)};module.exports.standardDeviation=function(){var StandardDeviation=require("./../functions/aggregate/StandardDeviation.js");return new StandardDeviation(this)};module.exports.sum=function(){var Sum=require("./../functions/aggregate/Sum.js");return new Sum(this)};module.exports.variance=function(){var Variance=require("./../functions/aggregate/Variance.js");return new Variance(this)}},{"./../functions/aggregate/Average.js":33,"./../functions/aggregate/StandardDeviation.js":37,"./../functions/aggregate/Sum.js":38,"./../functions/aggregate/Variance.js":39,"./../functions/numeric/Absolute.js":59,"./../functions/numeric/Ceil.js":60,"./../functions/numeric/Cosine.js":61,"./../functions/numeric/Division.js":62,"./../functions/numeric/Exponential.js":63,"./../functions/numeric/Floor.js":64,"./../functions/numeric/Minus.js":65,"./../functions/numeric/Modulo.js":66,"./../functions/numeric/Multiplication.js":67,"./../functions/numeric/Plus.js":68,"./../functions/numeric/Power.js":69,"./../functions/numeric/Round.js":70,"./../functions/numeric/Sine.js":71,"./../functions/numeric/SquareRoot.js":72,"./../functions/numeric/Tangent.js":73}],92:[function(require,module,exports){module.exports.gt=function(attr){var GreaterThan=require("./../functions/comparable/GreaterThan.js");return new GreaterThan(this,attr)};module.exports.gte=function(attr){var GreaterThanEqual=require("./../functions/comparable/GreaterThanEqual.js");return new GreaterThanEqual(this,attr)};module.exports.st=function(attr){var SmallerThan=require("./../functions/comparable/SmallerThan.js");return new SmallerThan(this,attr)};module.exports.ste=function(attr){var SmallerThanEqual=require("./../functions/comparable/SmallerThanEqual.js");return new SmallerThanEqual(this,attr)};module.exports.max=function(){var Maximum=require("./../functions/aggregate/Maximum");return new Maximum(this)};module.exports.min=function(){var Minimum=require("./../functions/aggregate/Minimum");return new Minimum(this)}},{"./../functions/aggregate/Maximum":35,"./../functions/aggregate/Minimum":36,"./../functions/comparable/GreaterThan.js":41,"./../functions/comparable/GreaterThanEqual.js":42,"./../functions/comparable/SmallerThan.js":43,"./../functions/comparable/SmallerThanEqual.js":44}],93:[function(require,module,exports){module.exports.length=function(){var Length=require("./../functions/string/Length.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Length(this))}return new Length(this)};module.exports.lowercase=function(){var Lowercase=require("./../functions/string/Lowercase.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Lowercase(this))}return new Lowercase(this)};module.exports.test=function(regex){var Test=require("./../functions/string/Test.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Test(this,regex))}return new Test(this,regex)};module.exports.substr=function(index,len){var Substring=require("./../functions/string/Substring.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Substring(this,index,len))}return new Substring(this,index,len)};module.exports.uppercase=function(){var Uppercase=require("./../functions/string/Uppercase.js");if(this._checkNegatedAttribute){return this._checkNegatedAttribute(new Uppercase(this))}return new Uppercase(this)}},{"./../functions/string/Length.js":74,"./../functions/string/Lowercase.js":75,"./../functions/string/Substring.js":76,"./../functions/string/Test.js":77,"./../functions/string/Uppercase.js":78}],94:[function(require,module,exports){var Type=require("./../Type");var _=require("lodash");var TBoolean=Type.extend({},{equal:function(boolean1,boolean2){return boolean1===boolean2},toString:function(){return"Boolean"},value:function(boolean){return boolean},payload:[require("./../mixins/comparable"),require("./../mixins/connectable"),require("./../mixins/not")],type:"Boolean"});module.exports=TBoolean},{"./../Type":11,"./../mixins/comparable":87,"./../mixins/connectable":88,"./../mixins/not":90,lodash:104}],95:[function(require,module,exports){var Object=require("./Object");var _=require("lodash");var Date=Object.extend({},{serialize:function(date){return date.getTime()},coerce:function(value){if(_.isString(value)){return new Date(value)}else if(_.isNumber(value)){var result=new Date;result.setTime(value);return result}else if(_.isDate(value)){return value}},equal:function(date1,date2){return date1===date2},toString:function(){return"Date"},value:function(date){return date},payload:[require("./../mixins/comparable"),require("./../mixins/size-comparable"),require("./../mixins/not"),require("./../mixins/date")],type:"Date"});module.exports=Date},{"./../mixins/comparable":87,"./../mixins/date":89,"./../mixins/not":90,"./../mixins/size-comparable":92,"./Object":99,lodash:104}],96:[function(require,module,exports){var Numeric=require("./Numeric.js");var Float=Numeric.extend({},{toString:function(){return"Float"},primitive:true,type:"Float"});module.exports=Float},{"./Numeric.js":98}],97:[function(require,module,exports){var TNumeric=require("./Numeric.js");var _=require("lodash");var Integer=TNumeric.extend({},{coerce:function(value){if(_.isNumber(value)||_.isString(value)){return parseInt(value)}},toString:function(){return"Integer"},primitive:true,type:"Integer"});module.exports=Integer},{"./Numeric.js":98,lodash:104}],98:[function(require,module,exports){var Type=require("./../Type");var _=require("lodash");var Numeric=Type.extend({},{coerce:function(value){if(_.isNumber(value)){return value}else if(_.isString(value)){return parseFloat(value)}},payload:[require("./../mixins/comparable"),require("./../mixins/size-comparable"),require("./../mixins/numeric"),require("./../mixins/connectable"),require("./../mixins/not")],value:function(numeric){return numeric},equal:function(numeric1,numeric2){return numeric1===numeric2},toString:function(){return"Numeric"},primitive:true,type:"Numeric"});module.exports=Numeric},{"./../Type":11,"./../mixins/comparable":87,"./../mixins/connectable":88,"./../mixins/not":90,"./../mixins/numeric":91,"./../mixins/size-comparable":92,lodash:104}],99:[function(require,module,exports){var Type=require("./../Type");var _=require("lodash");var TObject=Type.extend({constructor:function(value){Type.apply(this,Array.prototype.slice.call(arguments,0));if(_.isObject(value)){_.extend(this,value)}this.name="Object"},toString:function(){return"Object"}},{coerce:function(value){return value},payload:[require("./../mixins/comparable"),require("./../mixins/connectable"),require("./../mixins/not")],value:function(object){return object},equal:function(object1,object2){return _.isEqual(object1,object2)},toString:function(){return"Object"},primitive:false,type:"Object"});module.exports=TObject},{"./../Type":11,"./../mixins/comparable":87,"./../mixins/connectable":88,"./../mixins/not":90,lodash:104}],100:[function(require,module,exports){var Type=require("./../Type");var TBoolean=require("./Boolean");var _=require("lodash");var String=Type.extend({},{coerce:function(value){return value},payload:[require("./../mixins/comparable"),require("./../mixins/size-comparable"),require("./../mixins/connectable"),require("./../mixins/not"),require("./../mixins/string")],equal:function(str1,str2){return str2===str1},toString:function(){return"String"},primitive:true,type:"TString"});module.exports=String},{"./../Type":11,"./../mixins/comparable":87,"./../mixins/connectable":88,"./../mixins/not":90,"./../mixins/size-comparable":92,"./../mixins/string":93,"./Boolean":94,lodash:104}],101:[function(require,module,exports){var Type=require("./../Type");var TBoolean=require("./Boolean");var TType=Type.extend({},{equal:function(type1,type2){return type1===type2},toString:function(){return"Type"},type:"Type"});module.exports=TType},{"./../Type":11,"./Boolean":94}],102:[function(require,module,exports){module.exports.Index=require("./affinity/Index.js");module.exports.Type=require("./affinity/types/Type.js");module.exports.Set=require("./affinity/Set.js");module.exports.Relation=require("./affinity/Relation.js");module.exports.Tuple=require("./affinity/Tuple.js");module.exports.Header=require("./affinity/Header.js");module.exports.Attribute=require("./affinity/Attribute.js");module.exports.Object=require("./affinity/types/Object");module.exports.Integer=require("./affinity/types/Integer");module.exports.Float=require("./affinity/types/Float");module.exports.String=require("./affinity/types/String");module.exports.Boolean=require("./affinity/types/Boolean");module.exports.Date=require("./affinity/types/Date");module.exports.Function=require("./affinity/Function.js");module.exports.And=require("./affinity/functions/connective/And.js");module.exports.Or=require("./affinity/functions/connective/Or.js");module.exports.Not=require("./affinity/functions/connective/Not.js");module.exports.Equal=require("./affinity/functions/comparable/Equal.js");module.exports.eq=function(attr1,attr2){return new module.exports.Equal(attr1,attr2)};module.exports.GreaterThan=require("./affinity/functions/comparable/GreaterThan.js");module.exports.gt=function(attr1,attr2){return new module.exports.GreaterThan(attr1,attr2)};module.exports.GreaterThanEqual=require("./affinity/functions/comparable/GreaterThanEqual.js");module.exports.gte=function(attr1,attr2){return new module.exports.GreaterThanEqual(attr1,attr2)};module.exports.SmallerThan=require("./affinity/functions/comparable/SmallerThan.js");module.exports.ste=function(attr1,attr2){return new module.exports.SmallerThan(attr1,attr2)};module.exports.SmallerThanEqual=require("./affinity/functions/comparable/SmallerThanEqual.js");module.exports.ste=function(attr1,attr2){return new module.exports.SmallerThanEqual(attr1,attr2)};module.exports.Absolute=require("./affinity/functions/numeric/Absolute.js");module.exports.Ceil=require("./affinity/functions/numeric/Ceil.js");module.exports.Cosine=require("./affinity/functions/numeric/Cosine.js");module.exports.Division=require("./affinity/functions/numeric/Division.js");module.exports.Exponential=require("./affinity/functions/numeric/Exponential.js");module.exports.Floor=require("./affinity/functions/numeric/Floor.js");module.exports.Minus=require("./affinity/functions/numeric/Minus.js");module.exports.Modulo=require("./affinity/functions/numeric/Modulo.js");module.exports.Multiplication=require("./affinity/functions/numeric/Multiplication.js");module.exports.Plus=require("./affinity/functions/numeric/Plus.js");module.exports.Power=require("./affinity/functions/numeric/Power.js");module.exports.Round=require("./affinity/functions/numeric/Round.js");module.exports.Sine=require("./affinity/functions/numeric/Sine.js");module.exports.SquareRoot=require("./affinity/functions/numeric/SquareRoot.js");module.exports.Tangent=require("./affinity/functions/numeric/Tangent.js");module.exports.abs=function(attr){return new module.exports.Absolute(attr)};module.exports.ceil=function(attr){return new module.exports.Ceil(attr)};module.exports.floor=function(attr){return new module.exports.Floor(attr)};module.exports.cos=function(attr){return new module.exports.Cosine(attr)};module.exports.div=function(attr1,attr2){return new module.exports.Division(attr1,attr2)};module.exports.exp=function(attr){return new module.exports.Exponential(attr)};module.exports.minus=function(attr1,attr2){return new module.exports.Minus(attr1,attr2)};module.exports.mod=function(attr1,attr2){return new module.exports.Modulo(attr1,attr2)};module.exports.times=function(attr1,attr2){return new module.exports.Multiplication(attr1,attr2)};module.exports.plus=function(attr1,attr2){return new module.exports.Plus(attr1,attr2)};module.exports.pow=function(attr1,attr2){return new module.exports.Power(attr1,attr2)};module.exports.round=function(attr){return new module.exports.Round(attr)};module.exports.sin=function(attr){return new module.exports.Sine(attr)};module.exports.sqrt=function(attr){return new module.exports.SquareRoot(attr)};module.exports.tan=function(attr){return new module.exports.Tangent(attr)};module.exports.Length=require("./affinity/functions/string/Length.js");module.exports.Lowercase=require("./affinity/functions/string/Lowercase.js");module.exports.Test=require("./affinity/functions/string/Test.js");module.exports.Substring=require("./affinity/functions/string/Substring.js");module.exports.Uppercase=require("./affinity/functions/string/Uppercase.js");module.exports.length=function(attr){return new module.exports.Length(attr)};module.exports.lowercase=function(attr){return new module.exports.Lowercase(attr)};module.exports.test=function(attr,regex){return new module.exports.Test(attr,regex)};module.exports.substr=function(attr,start,length){return new module.exports.Length(attr,start,length)};module.exports.uppercase=function(attr){return new module.exports.Length(attr)};module.exports.TupleValue=require("./affinity/functions/tuple/Attribute.js");module.exports.value=function(relation,attributeName){var result=new module.exports.TupleValue(attributeName);result.type(relation.header().get(attributeName));return result};module.exports.DayOfMonth=require("./affinity/functions/date/DayOfMonth.js");module.exports.DayOfMonth=require("./affinity/functions/date/DayOfMonth.js");module.exports.DayOfWeek=require("./affinity/functions/date/DayOfWeek.js");module.exports.DayOfYear=require("./affinity/functions/date/DayOfYear.js");module.exports.Hours=require("./affinity/functions/date/Hours.js");module.exports.Milliseconds=require("./affinity/functions/date/Milliseconds.js");module.exports.Minutes=require("./affinity/functions/date/Minutes.js");module.exports.Month=require("./affinity/functions/date/Month.js");module.exports.Seconds=require("./affinity/functions/date/Seconds.js");module.exports.Timestamp=require("./affinity/functions/date/Timestamp.js");module.exports.WeekOfYear=require("./affinity/functions/date/WeekOfYear.js");module.exports.Year=require("./affinity/functions/date/Year.js");module.exports.count=function(){return new(require("./affinity/functions/aggregate/Count.js"))};module.exports.Composition=require("./affinity/algebra/Composition.js");module.exports.Difference=require("./affinity/algebra/Difference.js");module.exports.Extension=require("./affinity/algebra/Extension.js");module.exports.Group=require("./affinity/algebra/Group.js");module.exports.Intersection=require("./affinity/algebra/Intersection.js");module.exports.Join=require("./affinity/algebra/Join.js");module.exports.Product=require("./affinity/algebra/Product.js");module.exports.Projection=require("./affinity/algebra/Projection.js");module.exports.Rename=require("./affinity/algebra/Rename.js");module.exports.Restriction=require("./affinity/algebra/Restriction.js");module.exports.SemiDifference=require("./affinity/algebra/SemiDifference.js");module.exports.SemiJoin=require("./affinity/algebra/SemiJoin.js");module.exports.Ungroup=require("./affinity/algebra/Ungroup.js");module.exports.Union=require("./affinity/algebra/Union.js");module.exports.Unwrap=require("./affinity/algebra/Unwrap.js");module.exports.Unwrap=require("./affinity/algebra/Wrap.js");module.exports.TABLE_DUM=new module.exports.Relation([]);module.exports.TABLE_DEE=new module.exports.Relation([],[[]])},{"./affinity/Attribute.js":2,"./affinity/Function.js":4,"./affinity/Header.js":5,"./affinity/Index.js":6,"./affinity/Relation.js":8,"./affinity/Set.js":9,"./affinity/Tuple.js":10,"./affinity/algebra/Composition.js":12,"./affinity/algebra/Difference.js":13,"./affinity/algebra/Extension.js":14,"./affinity/algebra/Group.js":15,"./affinity/algebra/Intersection.js":16,"./affinity/algebra/Join.js":17,"./affinity/algebra/Product.js":18,"./affinity/algebra/Projection.js":19,"./affinity/algebra/Rename.js":20,"./affinity/algebra/Restriction.js":21,"./affinity/algebra/SemiDifference.js":22,"./affinity/algebra/SemiJoin.js":23,"./affinity/algebra/Ungroup.js":27,"./affinity/algebra/Union.js":28,"./affinity/algebra/Unwrap.js":29,"./affinity/algebra/Wrap.js":30,"./affinity/functions/aggregate/Count.js":34,"./affinity/functions/comparable/Equal.js":40,"./affinity/functions/comparable/GreaterThan.js":41,"./affinity/functions/comparable/GreaterThanEqual.js":42,"./affinity/functions/comparable/SmallerThan.js":43,"./affinity/functions/comparable/SmallerThanEqual.js":44,"./affinity/functions/connective/And.js":45,"./affinity/functions/connective/Not.js":46,"./affinity/functions/connective/Or.js":47,"./affinity/functions/date/DayOfMonth.js":48,"./affinity/functions/date/DayOfWeek.js":49,"./affinity/functions/date/DayOfYear.js":50,"./affinity/functions/date/Hours.js":51,"./affinity/functions/date/Milliseconds.js":52,"./affinity/functions/date/Minutes.js":53,"./affinity/functions/date/Month.js":54,"./affinity/functions/date/Seconds.js":55,"./affinity/functions/date/Timestamp.js":56,"./affinity/functions/date/WeekOfYear.js":57,"./affinity/functions/date/Year.js":58,"./affinity/functions/numeric/Absolute.js":59,"./affinity/functions/numeric/Ceil.js":60,"./affinity/functions/numeric/Cosine.js":61,"./affinity/functions/numeric/Division.js":62,"./affinity/functions/numeric/Exponential.js":63,"./affinity/functions/numeric/Floor.js":64,"./affinity/functions/numeric/Minus.js":65,"./affinity/functions/numeric/Modulo.js":66,"./affinity/functions/numeric/Multiplication.js":67,"./affinity/functions/numeric/Plus.js":68,"./affinity/functions/numeric/Power.js":69,"./affinity/functions/numeric/Round.js":70,"./affinity/functions/numeric/Sine.js":71,"./affinity/functions/numeric/SquareRoot.js":72,"./affinity/functions/numeric/Tangent.js":73,"./affinity/functions/string/Length.js":74,"./affinity/functions/string/Lowercase.js":75,"./affinity/functions/string/Substring.js":76,"./affinity/functions/string/Test.js":77,"./affinity/functions/string/Uppercase.js":78,"./affinity/functions/tuple/Attribute.js":79,"./affinity/types/Boolean":94,"./affinity/types/Date":95,"./affinity/types/Float":96,"./affinity/types/Integer":97,"./affinity/types/Object":99,"./affinity/types/String":100,"./affinity/types/Type.js":101}],103:[function(require,module,exports){(function(process){!function(exports,undefined){var isArray=Array.isArray?Array.isArray:function _isArray(obj){return Object.prototype.toString.call(obj)==="[object Array]"};var defaultMaxListeners=10;function init(){this._events={};if(this._conf){configure.call(this,this._conf)}}function configure(conf){if(conf){this._conf=conf;conf.delimiter&&(this.delimiter=conf.delimiter);conf.maxListeners&&(this._events.maxListeners=conf.maxListeners);conf.wildcard&&(this.wildcard=conf.wildcard);conf.newListener&&(this.newListener=conf.newListener);if(this.wildcard){this.listenerTree={}}}}function EventEmitter(conf){this._events={};this.newListener=false;configure.call(this,conf)}function searchListenerTree(handlers,type,tree,i){if(!tree){return[]}var listeners=[],leaf,len,branch,xTree,xxTree,isolatedBranch,endReached,typeLength=type.length,currentType=type[i],nextType=type[i+1];if(i===typeLength&&tree._listeners){if(typeof tree._listeners==="function"){handlers&&handlers.push(tree._listeners);
return[tree]}else{for(leaf=0,len=tree._listeners.length;leaf<len;leaf++){handlers&&handlers.push(tree._listeners[leaf])}return[tree]}}if(currentType==="*"||currentType==="**"||tree[currentType]){if(currentType==="*"){for(branch in tree){if(branch!=="_listeners"&&tree.hasOwnProperty(branch)){listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],i+1))}}return listeners}else if(currentType==="**"){endReached=i+1===typeLength||i+2===typeLength&&nextType==="*";if(endReached&&tree._listeners){listeners=listeners.concat(searchListenerTree(handlers,type,tree,typeLength))}for(branch in tree){if(branch!=="_listeners"&&tree.hasOwnProperty(branch)){if(branch==="*"||branch==="**"){if(tree[branch]._listeners&&!endReached){listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],typeLength))}listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],i))}else if(branch===nextType){listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],i+2))}else{listeners=listeners.concat(searchListenerTree(handlers,type,tree[branch],i))}}}return listeners}listeners=listeners.concat(searchListenerTree(handlers,type,tree[currentType],i+1))}xTree=tree["*"];if(xTree){searchListenerTree(handlers,type,xTree,i+1)}xxTree=tree["**"];if(xxTree){if(i<typeLength){if(xxTree._listeners){searchListenerTree(handlers,type,xxTree,typeLength)}for(branch in xxTree){if(branch!=="_listeners"&&xxTree.hasOwnProperty(branch)){if(branch===nextType){searchListenerTree(handlers,type,xxTree[branch],i+2)}else if(branch===currentType){searchListenerTree(handlers,type,xxTree[branch],i+1)}else{isolatedBranch={};isolatedBranch[branch]=xxTree[branch];searchListenerTree(handlers,type,{"**":isolatedBranch},i+1)}}}}else if(xxTree._listeners){searchListenerTree(handlers,type,xxTree,typeLength)}else if(xxTree["*"]&&xxTree["*"]._listeners){searchListenerTree(handlers,type,xxTree["*"],typeLength)}}return listeners}function growListenerTree(type,listener){type=typeof type==="string"?type.split(this.delimiter):type.slice();for(var i=0,len=type.length;i+1<len;i++){if(type[i]==="**"&&type[i+1]==="**"){return}}var tree=this.listenerTree;var name=type.shift();while(name){if(!tree[name]){tree[name]={}}tree=tree[name];if(type.length===0){if(!tree._listeners){tree._listeners=listener}else if(typeof tree._listeners==="function"){tree._listeners=[tree._listeners,listener]}else if(isArray(tree._listeners)){tree._listeners.push(listener);if(!tree._listeners.warned){var m=defaultMaxListeners;if(typeof this._events.maxListeners!=="undefined"){m=this._events.maxListeners}if(m>0&&tree._listeners.length>m){tree._listeners.warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",tree._listeners.length);console.trace()}}}return true}name=type.shift()}return true}EventEmitter.prototype.delimiter=".";EventEmitter.prototype.setMaxListeners=function(n){this._events||init.call(this);this._events.maxListeners=n;if(!this._conf)this._conf={};this._conf.maxListeners=n};EventEmitter.prototype.event="";EventEmitter.prototype.once=function(event,fn){this.many(event,1,fn);return this};EventEmitter.prototype.many=function(event,ttl,fn){var self=this;if(typeof fn!=="function"){throw new Error("many only accepts instances of Function")}function listener(){if(--ttl===0){self.off(event,listener)}fn.apply(this,arguments)}listener._origin=fn;this.on(event,listener);return self};EventEmitter.prototype.emit=function(){this._events||init.call(this);var type=arguments[0];if(type==="newListener"&&!this.newListener){if(!this._events.newListener){return false}}if(this._all){var l=arguments.length;var args=new Array(l-1);for(var i=1;i<l;i++)args[i-1]=arguments[i];for(i=0,l=this._all.length;i<l;i++){this.event=type;this._all[i].apply(this,args)}}if(type==="error"){if(!this._all&&!this._events.error&&!(this.wildcard&&this.listenerTree.error)){if(arguments[1]instanceof Error){throw arguments[1]}else{throw new Error("Uncaught, unspecified 'error' event.")}return false}}var handler;if(this.wildcard){handler=[];var ns=typeof type==="string"?type.split(this.delimiter):type.slice();searchListenerTree.call(this,handler,ns,this.listenerTree,0)}else{handler=this._events[type]}if(typeof handler==="function"){this.event=type;if(arguments.length===1){handler.call(this)}else if(arguments.length>1)switch(arguments.length){case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:var l=arguments.length;var args=new Array(l-1);for(var i=1;i<l;i++)args[i-1]=arguments[i];handler.apply(this,args)}return true}else if(handler){var l=arguments.length;var args=new Array(l-1);for(var i=1;i<l;i++)args[i-1]=arguments[i];var listeners=handler.slice();for(var i=0,l=listeners.length;i<l;i++){this.event=type;listeners[i].apply(this,args)}return listeners.length>0||this._all}else{return this._all}};EventEmitter.prototype.on=function(type,listener){if(typeof type==="function"){this.onAny(type);return this}if(typeof listener!=="function"){throw new Error("on only accepts instances of Function")}this._events||init.call(this);this.emit("newListener",type,listener);if(this.wildcard){growListenerTree.call(this,type,listener);return this}if(!this._events[type]){this._events[type]=listener}else if(typeof this._events[type]==="function"){this._events[type]=[this._events[type],listener]}else if(isArray(this._events[type])){this._events[type].push(listener);if(!this._events[type].warned){var m=defaultMaxListeners;if(typeof this._events.maxListeners!=="undefined"){m=this._events.maxListeners}if(m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);console.trace()}}}return this};EventEmitter.prototype.onAny=function(fn){if(!this._all){this._all=[]}if(typeof fn!=="function"){throw new Error("onAny only accepts instances of Function")}this._all.push(fn);return this};EventEmitter.prototype.addListener=EventEmitter.prototype.on;EventEmitter.prototype.off=function(type,listener){if(typeof listener!=="function"){throw new Error("removeListener only takes instances of Function")}var handlers,leafs=[];if(this.wildcard){var ns=typeof type==="string"?type.split(this.delimiter):type.slice();leafs=searchListenerTree.call(this,null,ns,this.listenerTree,0)}else{if(!this._events[type])return this;handlers=this._events[type];leafs.push({_listeners:handlers})}for(var iLeaf=0;iLeaf<leafs.length;iLeaf++){var leaf=leafs[iLeaf];handlers=leaf._listeners;if(isArray(handlers)){var position=-1;for(var i=0,length=handlers.length;i<length;i++){if(handlers[i]===listener||handlers[i].listener&&handlers[i].listener===listener||handlers[i]._origin&&handlers[i]._origin===listener){position=i;break}}if(position<0){continue}if(this.wildcard){leaf._listeners.splice(position,1)}else{this._events[type].splice(position,1)}if(handlers.length===0){if(this.wildcard){delete leaf._listeners}else{delete this._events[type]}}return this}else if(handlers===listener||handlers.listener&&handlers.listener===listener||handlers._origin&&handlers._origin===listener){if(this.wildcard){delete leaf._listeners}else{delete this._events[type]}}}return this};EventEmitter.prototype.offAny=function(fn){var i=0,l=0,fns;if(fn&&this._all&&this._all.length>0){fns=this._all;for(i=0,l=fns.length;i<l;i++){if(fn===fns[i]){fns.splice(i,1);return this}}}else{this._all=[]}return this};EventEmitter.prototype.removeListener=EventEmitter.prototype.off;EventEmitter.prototype.removeAllListeners=function(type){if(arguments.length===0){!this._events||init.call(this);return this}if(this.wildcard){var ns=typeof type==="string"?type.split(this.delimiter):type.slice();var leafs=searchListenerTree.call(this,null,ns,this.listenerTree,0);for(var iLeaf=0;iLeaf<leafs.length;iLeaf++){var leaf=leafs[iLeaf];leaf._listeners=null}}else{if(!this._events[type])return this;this._events[type]=null}return this};EventEmitter.prototype.listeners=function(type){if(this.wildcard){var handlers=[];var ns=typeof type==="string"?type.split(this.delimiter):type.slice();searchListenerTree.call(this,handlers,ns,this.listenerTree,0);return handlers}this._events||init.call(this);if(!this._events[type])this._events[type]=[];if(!isArray(this._events[type])){this._events[type]=[this._events[type]]}return this._events[type]};EventEmitter.prototype.listenersAny=function(){if(this._all){return this._all}else{return[]}};if(typeof define==="function"&&define.amd){define(function(){return EventEmitter})}else{exports.EventEmitter2=EventEmitter}}(typeof process!=="undefined"&&typeof process.title!=="undefined"&&typeof exports!=="undefined"?exports:window)}).call(this,require("UPikzY"))},{UPikzY:105}],104:[function(require,module,exports){(function(global){(function(){var undefined;var arrayPool=[],objectPool=[];var idCounter=0;var keyPrefix=+new Date+"";var largeArraySize=75;var maxPoolSize=40;var whitespace=" 	\f"+"\n\r\u2028\u2029"+"";var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reFuncName=/^\s*function[ \n\r\t]+\w/;var reInterpolate=/<%=([\s\S]+?)%>/g;var reLeadingSpacesAndZeros=RegExp("^["+whitespace+"]*0+(?=.$)");var reNoMatch=/($^)/;var reThis=/\bthis\b/;var reUnescapedString=/['\n\r\t\u2028\u2029\\]/g;var contextProps=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"];var templateCounter=0;var argsClass="[object Arguments]",arrayClass="[object Array]",boolClass="[object Boolean]",dateClass="[object Date]",funcClass="[object Function]",numberClass="[object Number]",objectClass="[object Object]",regexpClass="[object RegExp]",stringClass="[object String]";var cloneableClasses={};cloneableClasses[funcClass]=false;cloneableClasses[argsClass]=cloneableClasses[arrayClass]=cloneableClasses[boolClass]=cloneableClasses[dateClass]=cloneableClasses[numberClass]=cloneableClasses[objectClass]=cloneableClasses[regexpClass]=cloneableClasses[stringClass]=true;var debounceOptions={leading:false,maxWait:0,trailing:false};var descriptor={configurable:false,enumerable:false,value:null,writable:false};var objectTypes={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false};var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};var root=objectTypes[typeof window]&&window||this;var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports;var freeGlobal=objectTypes[typeof global]&&global;if(freeGlobal&&(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal)){root=freeGlobal}function baseIndexOf(array,value,fromIndex){var index=(fromIndex||0)-1,length=array?array.length:0;while(++index<length){if(array[index]===value){return index}}return-1}function cacheIndexOf(cache,value){var type=typeof value;cache=cache.cache;if(type=="boolean"||value==null){return cache[value]?0:-1}if(type!="number"&&type!="string"){type="object"}var key=type=="number"?value:keyPrefix+value;cache=(cache=cache[type])&&cache[key];return type=="object"?cache&&baseIndexOf(cache,value)>-1?0:-1:cache?0:-1}function cachePush(value){var cache=this.cache,type=typeof value;if(type=="boolean"||value==null){cache[value]=true}else{if(type!="number"&&type!="string"){type="object"}var key=type=="number"?value:keyPrefix+value,typeCache=cache[type]||(cache[type]={});if(type=="object"){(typeCache[key]||(typeCache[key]=[])).push(value)}else{typeCache[key]=true}}}function charAtCallback(value){return value.charCodeAt(0)}function compareAscending(a,b){var ac=a.criteria,bc=b.criteria,index=-1,length=ac.length;while(++index<length){var value=ac[index],other=bc[index];if(value!==other){if(value>other||typeof value=="undefined"){return 1}if(value<other||typeof other=="undefined"){return-1}}}return a.index-b.index}function createCache(array){var index=-1,length=array.length,first=array[0],mid=array[length/2|0],last=array[length-1];if(first&&typeof first=="object"&&mid&&typeof mid=="object"&&last&&typeof last=="object"){return false}var cache=getObject();cache["false"]=cache["null"]=cache["true"]=cache["undefined"]=false;var result=getObject();result.array=array;result.cache=cache;result.push=cachePush;while(++index<length){result.push(array[index])}return result}function escapeStringChar(match){return"\\"+stringEscapes[match]}function getArray(){return arrayPool.pop()||[]}function getObject(){return objectPool.pop()||{array:null,cache:null,criteria:null,"false":false,index:0,"null":false,number:null,object:null,push:null,string:null,"true":false,undefined:false,value:null}}function releaseArray(array){array.length=0;if(arrayPool.length<maxPoolSize){arrayPool.push(array)}}function releaseObject(object){var cache=object.cache;if(cache){releaseObject(cache)}object.array=object.cache=object.criteria=object.object=object.number=object.string=object.value=null;if(objectPool.length<maxPoolSize){objectPool.push(object)}}function slice(array,start,end){start||(start=0);if(typeof end=="undefined"){end=array?array.length:0}var index=-1,length=end-start||0,result=Array(length<0?0:length);while(++index<length){result[index]=array[start+index]}return result}function runInContext(context){context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Boolean=context.Boolean,Date=context.Date,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayRef=[];var objectProto=Object.prototype;var oldDash=context._;var toString=objectProto.toString;var reNative=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");var ceil=Math.ceil,clearTimeout=context.clearTimeout,floor=Math.floor,fnToString=Function.prototype.toString,getPrototypeOf=isNative(getPrototypeOf=Object.getPrototypeOf)&&getPrototypeOf,hasOwnProperty=objectProto.hasOwnProperty,push=arrayRef.push,setTimeout=context.setTimeout,splice=arrayRef.splice,unshift=arrayRef.unshift;var defineProperty=function(){try{var o={},func=isNative(func=Object.defineProperty)&&func,result=func(o,o,o)&&func}catch(e){}return result}();var nativeCreate=isNative(nativeCreate=Object.create)&&nativeCreate,nativeIsArray=isNative(nativeIsArray=Array.isArray)&&nativeIsArray,nativeIsFinite=context.isFinite,nativeIsNaN=context.isNaN,nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys,nativeMax=Math.max,nativeMin=Math.min,nativeParseInt=context.parseInt,nativeRandom=Math.random;var ctorByClass={};ctorByClass[arrayClass]=Array;ctorByClass[boolClass]=Boolean;ctorByClass[dateClass]=Date;ctorByClass[funcClass]=Function;ctorByClass[objectClass]=Object;ctorByClass[numberClass]=Number;ctorByClass[regexpClass]=RegExp;ctorByClass[stringClass]=String;function lodash(value){return value&&typeof value=="object"&&!isArray(value)&&hasOwnProperty.call(value,"__wrapped__")?value:new lodashWrapper(value)}function lodashWrapper(value,chainAll){this.__chain__=!!chainAll;this.__wrapped__=value}lodashWrapper.prototype=lodash.prototype;var support=lodash.support={};support.funcDecomp=!isNative(context.WinRTError)&&reThis.test(runInContext);support.funcNames=typeof Function.name=="string";lodash.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:reInterpolate,variable:"",imports:{_:lodash}};function baseBind(bindData){var func=bindData[0],partialArgs=bindData[2],thisArg=bindData[4];function bound(){if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if(this instanceof bound){var thisBinding=baseCreate(func.prototype),result=func.apply(thisBinding,args||arguments);return isObject(result)?result:thisBinding}return func.apply(thisArg,args||arguments)}setBindData(bound,bindData);return bound}function baseClone(value,isDeep,callback,stackA,stackB){if(callback){var result=callback(value);if(typeof result!="undefined"){return result}}var isObj=isObject(value);if(isObj){var className=toString.call(value);if(!cloneableClasses[className]){return value}var ctor=ctorByClass[className];switch(className){case boolClass:case dateClass:return new ctor(+value);case numberClass:case stringClass:return new ctor(value);case regexpClass:result=ctor(value.source,reFlags.exec(value));result.lastIndex=value.lastIndex;return result}}else{return value}var isArr=isArray(value);if(isDeep){var initedStack=!stackA;stackA||(stackA=getArray());stackB||(stackB=getArray());var length=stackA.length;while(length--){if(stackA[length]==value){return stackB[length]}}result=isArr?ctor(value.length):{}}else{result=isArr?slice(value):assign({},value)}if(isArr){if(hasOwnProperty.call(value,"index")){result.index=value.index}if(hasOwnProperty.call(value,"input")){result.input=value.input}}if(!isDeep){return result}stackA.push(value);stackB.push(result);(isArr?forEach:forOwn)(value,function(objValue,key){result[key]=baseClone(objValue,isDeep,callback,stackA,stackB)});if(initedStack){releaseArray(stackA);releaseArray(stackB)}return result}function baseCreate(prototype,properties){return isObject(prototype)?nativeCreate(prototype):{}}if(!nativeCreate){baseCreate=function(){function Object(){}return function(prototype){if(isObject(prototype)){Object.prototype=prototype;var result=new Object;Object.prototype=null}return result||context.Object()}}()}function baseCreateCallback(func,thisArg,argCount){if(typeof func!="function"){return identity}if(typeof thisArg=="undefined"||!("prototype"in func)){return func}var bindData=func.__bindData__;if(typeof bindData=="undefined"){if(support.funcNames){bindData=!func.name}bindData=bindData||!support.funcDecomp;if(!bindData){var source=fnToString.call(func);if(!support.funcNames){bindData=!reFuncName.test(source)}if(!bindData){bindData=reThis.test(source);setBindData(func,bindData)}}}if(bindData===false||bindData!==true&&bindData[1]&1){return func}switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 2:return function(a,b){return func.call(thisArg,a,b)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)}}return bind(func,thisArg)}function baseCreateWrapper(bindData){var func=bindData[0],bitmask=bindData[1],partialArgs=bindData[2],partialRightArgs=bindData[3],thisArg=bindData[4],arity=bindData[5];var isBind=bitmask&1,isBindKey=bitmask&2,isCurry=bitmask&4,isCurryBound=bitmask&8,key=func;function bound(){var thisBinding=isBind?thisArg:this;if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if(partialRightArgs||isCurry){args||(args=slice(arguments));if(partialRightArgs){push.apply(args,partialRightArgs)}if(isCurry&&args.length<arity){bitmask|=16&~32;return baseCreateWrapper([func,isCurryBound?bitmask:bitmask&~3,args,null,thisArg,arity])}}args||(args=arguments);if(isBindKey){func=thisBinding[key]}if(this instanceof bound){thisBinding=baseCreate(func.prototype);var result=func.apply(thisBinding,args);return isObject(result)?result:thisBinding}return func.apply(thisBinding,args)}setBindData(bound,bindData);return bound}function baseDifference(array,values){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,isLarge=length>=largeArraySize&&indexOf===baseIndexOf,result=[];if(isLarge){var cache=createCache(values);if(cache){indexOf=cacheIndexOf;values=cache}else{isLarge=false}}while(++index<length){var value=array[index];if(indexOf(values,value)<0){result.push(value)}}if(isLarge){releaseObject(values)}return result}function baseFlatten(array,isShallow,isStrict,fromIndex){var index=(fromIndex||0)-1,length=array?array.length:0,result=[];while(++index<length){var value=array[index];if(value&&typeof value=="object"&&typeof value.length=="number"&&(isArray(value)||isArguments(value))){if(!isShallow){value=baseFlatten(value,isShallow,isStrict)}var valIndex=-1,valLength=value.length,resIndex=result.length;result.length+=valLength;while(++valIndex<valLength){result[resIndex++]=value[valIndex]}}else if(!isStrict){result.push(value)}}return result}function baseIsEqual(a,b,callback,isWhere,stackA,stackB){if(callback){var result=callback(a,b);if(typeof result!="undefined"){return!!result}}if(a===b){return a!==0||1/a==1/b}var type=typeof a,otherType=typeof b;if(a===a&&!(a&&objectTypes[type])&&!(b&&objectTypes[otherType])){return false}if(a==null||b==null){return a===b}var className=toString.call(a),otherClass=toString.call(b);if(className==argsClass){className=objectClass}if(otherClass==argsClass){otherClass=objectClass}if(className!=otherClass){return false}switch(className){case boolClass:case dateClass:return+a==+b;case numberClass:return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case regexpClass:case stringClass:return a==String(b)}var isArr=className==arrayClass;if(!isArr){var aWrapped=hasOwnProperty.call(a,"__wrapped__"),bWrapped=hasOwnProperty.call(b,"__wrapped__");if(aWrapped||bWrapped){return baseIsEqual(aWrapped?a.__wrapped__:a,bWrapped?b.__wrapped__:b,callback,isWhere,stackA,stackB)}if(className!=objectClass){return false}var ctorA=a.constructor,ctorB=b.constructor;if(ctorA!=ctorB&&!(isFunction(ctorA)&&ctorA instanceof ctorA&&isFunction(ctorB)&&ctorB instanceof ctorB)&&("constructor"in a&&"constructor"in b)){return false}}var initedStack=!stackA;stackA||(stackA=getArray());stackB||(stackB=getArray());var length=stackA.length;while(length--){if(stackA[length]==a){return stackB[length]==b}}var size=0;result=true;stackA.push(a);stackB.push(b);if(isArr){length=a.length;size=b.length;result=size==length;if(result||isWhere){while(size--){var index=length,value=b[size];if(isWhere){while(index--){if(result=baseIsEqual(a[index],value,callback,isWhere,stackA,stackB)){break}}}else if(!(result=baseIsEqual(a[size],value,callback,isWhere,stackA,stackB))){break}}}}else{forIn(b,function(value,key,b){if(hasOwnProperty.call(b,key)){size++;return result=hasOwnProperty.call(a,key)&&baseIsEqual(a[key],value,callback,isWhere,stackA,stackB)}});if(result&&!isWhere){forIn(a,function(value,key,a){if(hasOwnProperty.call(a,key)){return result=--size>-1}})}}stackA.pop();stackB.pop();if(initedStack){releaseArray(stackA);releaseArray(stackB)}return result}function baseMerge(object,source,callback,stackA,stackB){(isArray(source)?forEach:forOwn)(source,function(source,key){var found,isArr,result=source,value=object[key];if(source&&((isArr=isArray(source))||isPlainObject(source))){var stackLength=stackA.length;while(stackLength--){if(found=stackA[stackLength]==source){value=stackB[stackLength];break}}if(!found){var isShallow;if(callback){result=callback(value,source);if(isShallow=typeof result!="undefined"){value=result}}if(!isShallow){value=isArr?isArray(value)?value:[]:isPlainObject(value)?value:{}}stackA.push(source);stackB.push(value);if(!isShallow){baseMerge(value,source,callback,stackA,stackB)}}}else{if(callback){result=callback(value,source);if(typeof result=="undefined"){result=source}}if(typeof result!="undefined"){value=result}}object[key]=value})}function baseRandom(min,max){return min+floor(nativeRandom()*(max-min+1))}function baseUniq(array,isSorted,callback){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,result=[];var isLarge=!isSorted&&length>=largeArraySize&&indexOf===baseIndexOf,seen=callback||isLarge?getArray():result;if(isLarge){var cache=createCache(seen);indexOf=cacheIndexOf;seen=cache}while(++index<length){var value=array[index],computed=callback?callback(value,index,array):value;if(isSorted?!index||seen[seen.length-1]!==computed:indexOf(seen,computed)<0){if(callback||isLarge){seen.push(computed)}result.push(value)}}if(isLarge){releaseArray(seen.array);releaseObject(seen)}else if(callback){releaseArray(seen)}return result}function createAggregator(setter){return function(collection,callback,thisArg){var result={};callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){var value=collection[index];setter(result,value,callback(value,index,collection),collection)}}else{forOwn(collection,function(value,key,collection){setter(result,value,callback(value,key,collection),collection)})}return result}}function createWrapper(func,bitmask,partialArgs,partialRightArgs,thisArg,arity){var isBind=bitmask&1,isBindKey=bitmask&2,isCurry=bitmask&4,isCurryBound=bitmask&8,isPartial=bitmask&16,isPartialRight=bitmask&32;if(!isBindKey&&!isFunction(func)){throw new TypeError}if(isPartial&&!partialArgs.length){bitmask&=~16;isPartial=partialArgs=false}if(isPartialRight&&!partialRightArgs.length){bitmask&=~32;isPartialRight=partialRightArgs=false}var bindData=func&&func.__bindData__;if(bindData&&bindData!==true){bindData=slice(bindData);if(bindData[2]){bindData[2]=slice(bindData[2])}if(bindData[3]){bindData[3]=slice(bindData[3])}if(isBind&&!(bindData[1]&1)){bindData[4]=thisArg}if(!isBind&&bindData[1]&1){bitmask|=8}if(isCurry&&!(bindData[1]&4)){bindData[5]=arity}if(isPartial){push.apply(bindData[2]||(bindData[2]=[]),partialArgs)}if(isPartialRight){unshift.apply(bindData[3]||(bindData[3]=[]),partialRightArgs)}bindData[1]|=bitmask;return createWrapper.apply(null,bindData)}var creater=bitmask==1||bitmask===17?baseBind:baseCreateWrapper;return creater([func,bitmask,partialArgs,partialRightArgs,thisArg,arity])}function escapeHtmlChar(match){return htmlEscapes[match]}function getIndexOf(){var result=(result=lodash.indexOf)===indexOf?baseIndexOf:result;return result}function isNative(value){return typeof value=="function"&&reNative.test(value)}var setBindData=!defineProperty?noop:function(func,value){descriptor.value=value;defineProperty(func,"__bindData__",descriptor)};function shimIsPlainObject(value){var ctor,result;if(!(value&&toString.call(value)==objectClass)||(ctor=value.constructor,isFunction(ctor)&&!(ctor instanceof ctor))){return false}forIn(value,function(value,key){result=key});return typeof result=="undefined"||hasOwnProperty.call(value,result)}function unescapeHtmlChar(match){return htmlUnescapes[match]}function isArguments(value){return value&&typeof value=="object"&&typeof value.length=="number"&&toString.call(value)==argsClass||false}var isArray=nativeIsArray||function(value){return value&&typeof value=="object"&&typeof value.length=="number"&&toString.call(value)==arrayClass||false};var shimKeys=function(object){var index,iterable=object,result=[];if(!iterable)return result;if(!objectTypes[typeof object])return result;for(index in iterable){if(hasOwnProperty.call(iterable,index)){result.push(index)}}return result};var keys=!nativeKeys?shimKeys:function(object){if(!isObject(object)){return[]}return nativeKeys(object)};var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var htmlUnescapes=invert(htmlEscapes);var reEscapedHtml=RegExp("("+keys(htmlUnescapes).join("|")+")","g"),reUnescapedHtml=RegExp("["+keys(htmlEscapes).join("")+"]","g");var assign=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;var args=arguments,argsIndex=0,argsLength=typeof guard=="number"?2:args.length;if(argsLength>3&&typeof args[argsLength-2]=="function"){var callback=baseCreateCallback(args[--argsLength-1],args[argsLength--],2)}else if(argsLength>2&&typeof args[argsLength-1]=="function"){callback=args[--argsLength]}while(++argsIndex<argsLength){iterable=args[argsIndex];if(iterable&&objectTypes[typeof iterable]){var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;while(++ownIndex<length){index=ownProps[ownIndex];result[index]=callback?callback(result[index],iterable[index]):iterable[index]}}}return result};function clone(value,isDeep,callback,thisArg){if(typeof isDeep!="boolean"&&isDeep!=null){thisArg=callback;callback=isDeep;isDeep=false}return baseClone(value,isDeep,typeof callback=="function"&&baseCreateCallback(callback,thisArg,1))}function cloneDeep(value,callback,thisArg){return baseClone(value,true,typeof callback=="function"&&baseCreateCallback(callback,thisArg,1))}function create(prototype,properties){var result=baseCreate(prototype);return properties?assign(result,properties):result}var defaults=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;var args=arguments,argsIndex=0,argsLength=typeof guard=="number"?2:args.length;while(++argsIndex<argsLength){iterable=args[argsIndex];if(iterable&&objectTypes[typeof iterable]){var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;while(++ownIndex<length){index=ownProps[ownIndex];if(typeof result[index]=="undefined")result[index]=iterable[index]}}}return result};function findKey(object,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);forOwn(object,function(value,key,object){if(callback(value,key,object)){result=key;return false}});return result}function findLastKey(object,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);forOwnRight(object,function(value,key,object){if(callback(value,key,object)){result=key;return false}});return result}var forIn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&typeof thisArg=="undefined"?callback:baseCreateCallback(callback,thisArg,3);for(index in iterable){if(callback(iterable[index],index,collection)===false)return result}return result};function forInRight(object,callback,thisArg){var pairs=[];forIn(object,function(value,key){pairs.push(key,value)});var length=pairs.length;callback=baseCreateCallback(callback,thisArg,3);while(length--){if(callback(pairs[length--],pairs[length],object)===false){break}}return object}var forOwn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&typeof thisArg=="undefined"?callback:baseCreateCallback(callback,thisArg,3);var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;while(++ownIndex<length){index=ownProps[ownIndex];if(callback(iterable[index],index,collection)===false)return result}return result};function forOwnRight(object,callback,thisArg){var props=keys(object),length=props.length;callback=baseCreateCallback(callback,thisArg,3);while(length--){var key=props[length];if(callback(object[key],key,object)===false){break}}return object}function functions(object){var result=[];forIn(object,function(value,key){if(isFunction(value)){result.push(key)}});return result.sort()}function has(object,key){return object?hasOwnProperty.call(object,key):false}function invert(object){var index=-1,props=keys(object),length=props.length,result={};while(++index<length){var key=props[index];result[object[key]]=key}return result}function isBoolean(value){return value===true||value===false||value&&typeof value=="object"&&toString.call(value)==boolClass||false}function isDate(value){return value&&typeof value=="object"&&toString.call(value)==dateClass||false}function isElement(value){return value&&value.nodeType===1||false}function isEmpty(value){var result=true;if(!value){return result}var className=toString.call(value),length=value.length;if(className==arrayClass||className==stringClass||className==argsClass||className==objectClass&&typeof length=="number"&&isFunction(value.splice)){return!length
}forOwn(value,function(){return result=false});return result}function isEqual(a,b,callback,thisArg){return baseIsEqual(a,b,typeof callback=="function"&&baseCreateCallback(callback,thisArg,2))}function isFinite(value){return nativeIsFinite(value)&&!nativeIsNaN(parseFloat(value))}function isFunction(value){return typeof value=="function"}function isObject(value){return!!(value&&objectTypes[typeof value])}function isNaN(value){return isNumber(value)&&value!=+value}function isNull(value){return value===null}function isNumber(value){return typeof value=="number"||value&&typeof value=="object"&&toString.call(value)==numberClass||false}var isPlainObject=!getPrototypeOf?shimIsPlainObject:function(value){if(!(value&&toString.call(value)==objectClass)){return false}var valueOf=value.valueOf,objProto=isNative(valueOf)&&(objProto=getPrototypeOf(valueOf))&&getPrototypeOf(objProto);return objProto?value==objProto||getPrototypeOf(value)==objProto:shimIsPlainObject(value)};function isRegExp(value){return value&&typeof value=="object"&&toString.call(value)==regexpClass||false}function isString(value){return typeof value=="string"||value&&typeof value=="object"&&toString.call(value)==stringClass||false}function isUndefined(value){return typeof value=="undefined"}function mapValues(object,callback,thisArg){var result={};callback=lodash.createCallback(callback,thisArg,3);forOwn(object,function(value,key,object){result[key]=callback(value,key,object)});return result}function merge(object){var args=arguments,length=2;if(!isObject(object)){return object}if(typeof args[2]!="number"){length=args.length}if(length>3&&typeof args[length-2]=="function"){var callback=baseCreateCallback(args[--length-1],args[length--],2)}else if(length>2&&typeof args[length-1]=="function"){callback=args[--length]}var sources=slice(arguments,1,length),index=-1,stackA=getArray(),stackB=getArray();while(++index<length){baseMerge(object,sources[index],callback,stackA,stackB)}releaseArray(stackA);releaseArray(stackB);return object}function omit(object,callback,thisArg){var result={};if(typeof callback!="function"){var props=[];forIn(object,function(value,key){props.push(key)});props=baseDifference(props,baseFlatten(arguments,true,false,1));var index=-1,length=props.length;while(++index<length){var key=props[index];result[key]=object[key]}}else{callback=lodash.createCallback(callback,thisArg,3);forIn(object,function(value,key,object){if(!callback(value,key,object)){result[key]=value}})}return result}function pairs(object){var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){var key=props[index];result[index]=[key,object[key]]}return result}function pick(object,callback,thisArg){var result={};if(typeof callback!="function"){var index=-1,props=baseFlatten(arguments,true,false,1),length=isObject(object)?props.length:0;while(++index<length){var key=props[index];if(key in object){result[key]=object[key]}}}else{callback=lodash.createCallback(callback,thisArg,3);forIn(object,function(value,key,object){if(callback(value,key,object)){result[key]=value}})}return result}function transform(object,callback,accumulator,thisArg){var isArr=isArray(object);if(accumulator==null){if(isArr){accumulator=[]}else{var ctor=object&&object.constructor,proto=ctor&&ctor.prototype;accumulator=baseCreate(proto)}}if(callback){callback=lodash.createCallback(callback,thisArg,4);(isArr?forEach:forOwn)(object,function(value,index,object){return callback(accumulator,value,index,object)})}return accumulator}function values(object){var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){result[index]=object[props[index]]}return result}function at(collection){var args=arguments,index=-1,props=baseFlatten(args,true,false,1),length=args[2]&&args[2][args[1]]===collection?1:props.length,result=Array(length);while(++index<length){result[index]=collection[props[index]]}return result}function contains(collection,target,fromIndex){var index=-1,indexOf=getIndexOf(),length=collection?collection.length:0,result=false;fromIndex=(fromIndex<0?nativeMax(0,length+fromIndex):fromIndex)||0;if(isArray(collection)){result=indexOf(collection,target,fromIndex)>-1}else if(typeof length=="number"){result=(isString(collection)?collection.indexOf(target,fromIndex):indexOf(collection,target,fromIndex))>-1}else{forOwn(collection,function(value){if(++index>=fromIndex){return!(result=value===target)}})}return result}var countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key]++:result[key]=1});function every(collection,callback,thisArg){var result=true;callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){if(!(result=!!callback(collection[index],index,collection))){break}}}else{forOwn(collection,function(value,index,collection){return result=!!callback(value,index,collection)})}return result}function filter(collection,callback,thisArg){var result=[];callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){var value=collection[index];if(callback(value,index,collection)){result.push(value)}}}else{forOwn(collection,function(value,index,collection){if(callback(value,index,collection)){result.push(value)}})}return result}function find(collection,callback,thisArg){callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){var value=collection[index];if(callback(value,index,collection)){return value}}}else{var result;forOwn(collection,function(value,index,collection){if(callback(value,index,collection)){result=value;return false}});return result}}function findLast(collection,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);forEachRight(collection,function(value,index,collection){if(callback(value,index,collection)){result=value;return false}});return result}function forEach(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;callback=callback&&typeof thisArg=="undefined"?callback:baseCreateCallback(callback,thisArg,3);if(typeof length=="number"){while(++index<length){if(callback(collection[index],index,collection)===false){break}}}else{forOwn(collection,callback)}return collection}function forEachRight(collection,callback,thisArg){var length=collection?collection.length:0;callback=callback&&typeof thisArg=="undefined"?callback:baseCreateCallback(callback,thisArg,3);if(typeof length=="number"){while(length--){if(callback(collection[length],length,collection)===false){break}}}else{var props=keys(collection);length=props.length;forOwn(collection,function(value,key,collection){key=props?props[--length]:--length;return callback(collection[key],key,collection)})}return collection}var groupBy=createAggregator(function(result,value,key){(hasOwnProperty.call(result,key)?result[key]:result[key]=[]).push(value)});var indexBy=createAggregator(function(result,value,key){result[key]=value});function invoke(collection,methodName){var args=slice(arguments,2),index=-1,isFunc=typeof methodName=="function",length=collection?collection.length:0,result=Array(typeof length=="number"?length:0);forEach(collection,function(value){result[++index]=(isFunc?methodName:value[methodName]).apply(value,args)});return result}function map(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;callback=lodash.createCallback(callback,thisArg,3);if(typeof length=="number"){var result=Array(length);while(++index<length){result[index]=callback(collection[index],index,collection)}}else{result=[];forOwn(collection,function(value,key,collection){result[++index]=callback(value,key,collection)})}return result}function max(collection,callback,thisArg){var computed=-Infinity,result=computed;if(typeof callback!="function"&&thisArg&&thisArg[callback]===collection){callback=null}if(callback==null&&isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];if(value>result){result=value}}}else{callback=callback==null&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg,3);forEach(collection,function(value,index,collection){var current=callback(value,index,collection);if(current>computed){computed=current;result=value}})}return result}function min(collection,callback,thisArg){var computed=Infinity,result=computed;if(typeof callback!="function"&&thisArg&&thisArg[callback]===collection){callback=null}if(callback==null&&isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];if(value<result){result=value}}}else{callback=callback==null&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg,3);forEach(collection,function(value,index,collection){var current=callback(value,index,collection);if(current<computed){computed=current;result=value}})}return result}var pluck=map;function reduce(collection,callback,accumulator,thisArg){if(!collection)return accumulator;var noaccum=arguments.length<3;callback=lodash.createCallback(callback,thisArg,4);var index=-1,length=collection.length;if(typeof length=="number"){if(noaccum){accumulator=collection[++index]}while(++index<length){accumulator=callback(accumulator,collection[index],index,collection)}}else{forOwn(collection,function(value,index,collection){accumulator=noaccum?(noaccum=false,value):callback(accumulator,value,index,collection)})}return accumulator}function reduceRight(collection,callback,accumulator,thisArg){var noaccum=arguments.length<3;callback=lodash.createCallback(callback,thisArg,4);forEachRight(collection,function(value,index,collection){accumulator=noaccum?(noaccum=false,value):callback(accumulator,value,index,collection)});return accumulator}function reject(collection,callback,thisArg){callback=lodash.createCallback(callback,thisArg,3);return filter(collection,function(value,index,collection){return!callback(value,index,collection)})}function sample(collection,n,guard){if(collection&&typeof collection.length!="number"){collection=values(collection)}if(n==null||guard){return collection?collection[baseRandom(0,collection.length-1)]:undefined}var result=shuffle(collection);result.length=nativeMin(nativeMax(0,n),result.length);return result}function shuffle(collection){var index=-1,length=collection?collection.length:0,result=Array(typeof length=="number"?length:0);forEach(collection,function(value){var rand=baseRandom(0,++index);result[index]=result[rand];result[rand]=value});return result}function size(collection){var length=collection?collection.length:0;return typeof length=="number"?length:keys(collection).length}function some(collection,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){if(result=callback(collection[index],index,collection)){break}}}else{forOwn(collection,function(value,index,collection){return!(result=callback(value,index,collection))})}return!!result}function sortBy(collection,callback,thisArg){var index=-1,isArr=isArray(callback),length=collection?collection.length:0,result=Array(typeof length=="number"?length:0);if(!isArr){callback=lodash.createCallback(callback,thisArg,3)}forEach(collection,function(value,key,collection){var object=result[++index]=getObject();if(isArr){object.criteria=map(callback,function(key){return value[key]})}else{(object.criteria=getArray())[0]=callback(value,key,collection)}object.index=index;object.value=value});length=result.length;result.sort(compareAscending);while(length--){var object=result[length];result[length]=object.value;if(!isArr){releaseArray(object.criteria)}releaseObject(object)}return result}function toArray(collection){if(collection&&typeof collection.length=="number"){return slice(collection)}return values(collection)}var where=filter;function compact(array){var index=-1,length=array?array.length:0,result=[];while(++index<length){var value=array[index];if(value){result.push(value)}}return result}function difference(array){return baseDifference(array,baseFlatten(arguments,true,true,1))}function findIndex(array,callback,thisArg){var index=-1,length=array?array.length:0;callback=lodash.createCallback(callback,thisArg,3);while(++index<length){if(callback(array[index],index,array)){return index}}return-1}function findLastIndex(array,callback,thisArg){var length=array?array.length:0;callback=lodash.createCallback(callback,thisArg,3);while(length--){if(callback(array[length],length,array)){return length}}return-1}function first(array,callback,thisArg){var n=0,length=array?array.length:0;if(typeof callback!="number"&&callback!=null){var index=-1;callback=lodash.createCallback(callback,thisArg,3);while(++index<length&&callback(array[index],index,array)){n++}}else{n=callback;if(n==null||thisArg){return array?array[0]:undefined}}return slice(array,0,nativeMin(nativeMax(0,n),length))}function flatten(array,isShallow,callback,thisArg){if(typeof isShallow!="boolean"&&isShallow!=null){thisArg=callback;callback=typeof isShallow!="function"&&thisArg&&thisArg[isShallow]===array?null:isShallow;isShallow=false}if(callback!=null){array=map(array,callback,thisArg)}return baseFlatten(array,isShallow)}function indexOf(array,value,fromIndex){if(typeof fromIndex=="number"){var length=array?array.length:0;fromIndex=fromIndex<0?nativeMax(0,length+fromIndex):fromIndex||0}else if(fromIndex){var index=sortedIndex(array,value);return array[index]===value?index:-1}return baseIndexOf(array,value,fromIndex)}function initial(array,callback,thisArg){var n=0,length=array?array.length:0;if(typeof callback!="number"&&callback!=null){var index=length;callback=lodash.createCallback(callback,thisArg,3);while(index--&&callback(array[index],index,array)){n++}}else{n=callback==null||thisArg?1:callback||n}return slice(array,0,nativeMin(nativeMax(0,length-n),length))}function intersection(){var args=[],argsIndex=-1,argsLength=arguments.length,caches=getArray(),indexOf=getIndexOf(),trustIndexOf=indexOf===baseIndexOf,seen=getArray();while(++argsIndex<argsLength){var value=arguments[argsIndex];if(isArray(value)||isArguments(value)){args.push(value);caches.push(trustIndexOf&&value.length>=largeArraySize&&createCache(argsIndex?args[argsIndex]:seen))}}var array=args[0],index=-1,length=array?array.length:0,result=[];outer:while(++index<length){var cache=caches[0];value=array[index];if((cache?cacheIndexOf(cache,value):indexOf(seen,value))<0){argsIndex=argsLength;(cache||seen).push(value);while(--argsIndex){cache=caches[argsIndex];if((cache?cacheIndexOf(cache,value):indexOf(args[argsIndex],value))<0){continue outer}}result.push(value)}}while(argsLength--){cache=caches[argsLength];if(cache){releaseObject(cache)}}releaseArray(caches);releaseArray(seen);return result}function last(array,callback,thisArg){var n=0,length=array?array.length:0;if(typeof callback!="number"&&callback!=null){var index=length;callback=lodash.createCallback(callback,thisArg,3);while(index--&&callback(array[index],index,array)){n++}}else{n=callback;if(n==null||thisArg){return array?array[length-1]:undefined}}return slice(array,nativeMax(0,length-n))}function lastIndexOf(array,value,fromIndex){var index=array?array.length:0;if(typeof fromIndex=="number"){index=(fromIndex<0?nativeMax(0,index+fromIndex):nativeMin(fromIndex,index-1))+1}while(index--){if(array[index]===value){return index}}return-1}function pull(array){var args=arguments,argsIndex=0,argsLength=args.length,length=array?array.length:0;while(++argsIndex<argsLength){var index=-1,value=args[argsIndex];while(++index<length){if(array[index]===value){splice.call(array,index--,1);length--}}}return array}function range(start,end,step){start=+start||0;step=typeof step=="number"?step:+step||1;if(end==null){end=start;start=0}var index=-1,length=nativeMax(0,ceil((end-start)/(step||1))),result=Array(length);while(++index<length){result[index]=start;start+=step}return result}function remove(array,callback,thisArg){var index=-1,length=array?array.length:0,result=[];callback=lodash.createCallback(callback,thisArg,3);while(++index<length){var value=array[index];if(callback(value,index,array)){result.push(value);splice.call(array,index--,1);length--}}return result}function rest(array,callback,thisArg){if(typeof callback!="number"&&callback!=null){var n=0,index=-1,length=array?array.length:0;callback=lodash.createCallback(callback,thisArg,3);while(++index<length&&callback(array[index],index,array)){n++}}else{n=callback==null||thisArg?1:nativeMax(0,callback)}return slice(array,n)}function sortedIndex(array,value,callback,thisArg){var low=0,high=array?array.length:low;callback=callback?lodash.createCallback(callback,thisArg,1):identity;value=callback(value);while(low<high){var mid=low+high>>>1;callback(array[mid])<value?low=mid+1:high=mid}return low}function union(){return baseUniq(baseFlatten(arguments,true,true))}function uniq(array,isSorted,callback,thisArg){if(typeof isSorted!="boolean"&&isSorted!=null){thisArg=callback;callback=typeof isSorted!="function"&&thisArg&&thisArg[isSorted]===array?null:isSorted;isSorted=false}if(callback!=null){callback=lodash.createCallback(callback,thisArg,3)}return baseUniq(array,isSorted,callback)}function without(array){return baseDifference(array,slice(arguments,1))}function xor(){var index=-1,length=arguments.length;while(++index<length){var array=arguments[index];if(isArray(array)||isArguments(array)){var result=result?baseUniq(baseDifference(result,array).concat(baseDifference(array,result))):array}}return result||[]}function zip(){var array=arguments.length>1?arguments:arguments[0],index=-1,length=array?max(pluck(array,"length")):0,result=Array(length<0?0:length);while(++index<length){result[index]=pluck(array,index)}return result}function zipObject(keys,values){var index=-1,length=keys?keys.length:0,result={};if(!values&&length&&!isArray(keys[0])){values=[]}while(++index<length){var key=keys[index];if(values){result[key]=values[index]}else if(key){result[key[0]]=key[1]}}return result}function after(n,func){if(!isFunction(func)){throw new TypeError}return function(){if(--n<1){return func.apply(this,arguments)}}}function bind(func,thisArg){return arguments.length>2?createWrapper(func,17,slice(arguments,2),null,thisArg):createWrapper(func,1,null,null,thisArg)}function bindAll(object){var funcs=arguments.length>1?baseFlatten(arguments,true,false,1):functions(object),index=-1,length=funcs.length;while(++index<length){var key=funcs[index];object[key]=createWrapper(object[key],1,null,null,object)}return object}function bindKey(object,key){return arguments.length>2?createWrapper(key,19,slice(arguments,2),null,object):createWrapper(key,3,null,null,object)}function compose(){var funcs=arguments,length=funcs.length;while(length--){if(!isFunction(funcs[length])){throw new TypeError}}return function(){var args=arguments,length=funcs.length;while(length--){args=[funcs[length].apply(this,args)]}return args[0]}}function curry(func,arity){arity=typeof arity=="number"?arity:+arity||func.length;return createWrapper(func,4,null,null,null,arity)}function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=false,trailing=true;if(!isFunction(func)){throw new TypeError}wait=nativeMax(0,wait)||0;if(options===true){var leading=true;trailing=false}else if(isObject(options)){leading=options.leading;maxWait="maxWait"in options&&(nativeMax(wait,options.maxWait)||0);trailing="trailing"in options?options.trailing:trailing}var delayed=function(){var remaining=wait-(now()-stamp);if(remaining<=0){if(maxTimeoutId){clearTimeout(maxTimeoutId)}var isCalled=trailingCall;maxTimeoutId=timeoutId=trailingCall=undefined;if(isCalled){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=null}}}else{timeoutId=setTimeout(delayed,remaining)}};var maxDelayed=function(){if(timeoutId){clearTimeout(timeoutId)}maxTimeoutId=timeoutId=trailingCall=undefined;if(trailing||maxWait!==wait){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=null}}};return function(){args=arguments;stamp=now();thisArg=this;trailingCall=trailing&&(timeoutId||!leading);if(maxWait===false){var leadingCall=leading&&!timeoutId}else{if(!maxTimeoutId&&!leading){lastCalled=stamp}var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0;if(isCalled){if(maxTimeoutId){maxTimeoutId=clearTimeout(maxTimeoutId)}lastCalled=stamp;result=func.apply(thisArg,args)}else if(!maxTimeoutId){maxTimeoutId=setTimeout(maxDelayed,remaining)}}if(isCalled&&timeoutId){timeoutId=clearTimeout(timeoutId)}else if(!timeoutId&&wait!==maxWait){timeoutId=setTimeout(delayed,wait)}if(leadingCall){isCalled=true;result=func.apply(thisArg,args)}if(isCalled&&!timeoutId&&!maxTimeoutId){args=thisArg=null}return result}}function defer(func){if(!isFunction(func)){throw new TypeError}var args=slice(arguments,1);return setTimeout(function(){func.apply(undefined,args)},1)}function delay(func,wait){if(!isFunction(func)){throw new TypeError}var args=slice(arguments,2);return setTimeout(function(){func.apply(undefined,args)},wait)}function memoize(func,resolver){if(!isFunction(func)){throw new TypeError}var memoized=function(){var cache=memoized.cache,key=resolver?resolver.apply(this,arguments):keyPrefix+arguments[0];return hasOwnProperty.call(cache,key)?cache[key]:cache[key]=func.apply(this,arguments)};memoized.cache={};return memoized}function once(func){var ran,result;if(!isFunction(func)){throw new TypeError}return function(){if(ran){return result}ran=true;result=func.apply(this,arguments);func=null;return result}}function partial(func){return createWrapper(func,16,slice(arguments,1))}function partialRight(func){return createWrapper(func,32,null,slice(arguments,1))}function throttle(func,wait,options){var leading=true,trailing=true;if(!isFunction(func)){throw new TypeError}if(options===false){leading=false}else if(isObject(options)){leading="leading"in options?options.leading:leading;trailing="trailing"in options?options.trailing:trailing}debounceOptions.leading=leading;debounceOptions.maxWait=wait;debounceOptions.trailing=trailing;return debounce(func,wait,debounceOptions)}function wrap(value,wrapper){return createWrapper(wrapper,16,[value])}function constant(value){return function(){return value}}function createCallback(func,thisArg,argCount){var type=typeof func;if(func==null||type=="function"){return baseCreateCallback(func,thisArg,argCount)}if(type!="object"){return property(func)}var props=keys(func),key=props[0],a=func[key];if(props.length==1&&a===a&&!isObject(a)){return function(object){var b=object[key];return a===b&&(a!==0||1/a==1/b)}}return function(object){var length=props.length,result=false;while(length--){if(!(result=baseIsEqual(object[props[length]],func[props[length]],null,true))){break}}return result}}function escape(string){return string==null?"":String(string).replace(reUnescapedHtml,escapeHtmlChar)}function identity(value){return value}function mixin(object,source,options){var chain=true,methodNames=source&&functions(source);if(!source||!options&&!methodNames.length){if(options==null){options=source}ctor=lodashWrapper;source=object;object=lodash;methodNames=functions(source)}if(options===false){chain=false}else if(isObject(options)&&"chain"in options){chain=options.chain}var ctor=object,isFunc=isFunction(ctor);forEach(methodNames,function(methodName){var func=object[methodName]=source[methodName];if(isFunc){ctor.prototype[methodName]=function(){var chainAll=this.__chain__,value=this.__wrapped__,args=[value];push.apply(args,arguments);var result=func.apply(object,args);if(chain||chainAll){if(value===result&&isObject(result)){return this}result=new ctor(result);result.__chain__=chainAll}return result}}})}function noConflict(){context._=oldDash;return this}function noop(){}var now=isNative(now=Date.now)&&now||function(){return(new Date).getTime()};var parseInt=nativeParseInt(whitespace+"08")==8?nativeParseInt:function(value,radix){return nativeParseInt(isString(value)?value.replace(reLeadingSpacesAndZeros,""):value,radix||0)};function property(key){return function(object){return object[key]}}function random(min,max,floating){var noMin=min==null,noMax=max==null;if(floating==null){if(typeof min=="boolean"&&noMax){floating=min;min=1}else if(!noMax&&typeof max=="boolean"){floating=max;noMax=true}}if(noMin&&noMax){max=1}min=+min||0;if(noMax){max=min;min=0}else{max=+max||0}if(floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+rand*(max-min+parseFloat("1e-"+((rand+"").length-1))),max)}return baseRandom(min,max)}function result(object,key){if(object){var value=object[key];return isFunction(value)?object[key]():value}}function template(text,data,options){var settings=lodash.templateSettings;text=String(text||"");options=defaults({},options,settings);var imports=defaults({},options.imports,settings.imports),importsKeys=keys(imports),importsValues=values(imports);var isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");text.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=text.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){source+="' +\n__e("+escapeValue+") +\n'"}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '"}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"}index=offset+match.length;return match});source+="';\n";var variable=options.variable,hasVariable=variable;if(!hasVariable){variable="obj";source="with ("+variable+") {\n"+source+"\n}\n"}source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source="function("+variable+") {\n"+(hasVariable?"":variable+" || ("+variable+" = {});\n")+"var __t, __p = '', __e = _.escape"+(isEvaluating?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var sourceURL="\n/*\n//# sourceURL="+(options.sourceURL||"/lodash/template/source["+templateCounter++ +"]")+"\n*/";try{var result=Function(importsKeys,"return "+source+sourceURL).apply(undefined,importsValues)}catch(e){e.source=source;throw e}if(data){return result(data)}result.source=source;return result}function times(n,callback,thisArg){n=(n=+n)>-1?n:0;var index=-1,result=Array(n);callback=baseCreateCallback(callback,thisArg,1);while(++index<n){result[index]=callback(index)}return result}function unescape(string){return string==null?"":String(string).replace(reEscapedHtml,unescapeHtmlChar)}function uniqueId(prefix){var id=++idCounter;return String(prefix==null?"":prefix)+id}function chain(value){value=new lodashWrapper(value);value.__chain__=true;return value}function tap(value,interceptor){interceptor(value);return value}function wrapperChain(){this.__chain__=true;return this}function wrapperToString(){return String(this.__wrapped__)}function wrapperValueOf(){return this.__wrapped__}lodash.after=after;lodash.assign=assign;lodash.at=at;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.chain=chain;lodash.compact=compact;lodash.compose=compose;lodash.constant=constant;lodash.countBy=countBy;lodash.create=create;lodash.createCallback=createCallback;lodash.curry=curry;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.filter=filter;lodash.flatten=flatten;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.functions=functions;lodash.groupBy=groupBy;lodash.indexBy=indexBy;lodash.initial=initial;lodash.intersection=intersection;lodash.invert=invert;lodash.invoke=invoke;lodash.keys=keys;lodash.map=map;lodash.mapValues=mapValues;lodash.max=max;lodash.memoize=memoize;lodash.merge=merge;lodash.min=min;lodash.omit=omit;lodash.once=once;lodash.pairs=pairs;lodash.partial=partial;lodash.partialRight=partialRight;lodash.pick=pick;lodash.pluck=pluck;lodash.property=property;lodash.pull=pull;lodash.range=range;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.shuffle=shuffle;lodash.sortBy=sortBy;lodash.tap=tap;lodash.throttle=throttle;lodash.times=times;lodash.toArray=toArray;lodash.transform=transform;lodash.union=union;lodash.uniq=uniq;lodash.values=values;lodash.where=where;lodash.without=without;lodash.wrap=wrap;lodash.xor=xor;lodash.zip=zip;lodash.zipObject=zipObject;lodash.collect=map;lodash.drop=rest;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.extend=assign;lodash.methods=functions;lodash.object=zipObject;lodash.select=filter;lodash.tail=rest;lodash.unique=uniq;lodash.unzip=zip;mixin(lodash);lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.contains=contains;lodash.escape=escape;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.has=has;lodash.identity=identity;lodash.indexOf=indexOf;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isBoolean=isBoolean;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isNaN=isNaN;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isString=isString;lodash.isUndefined=isUndefined;lodash.lastIndexOf=lastIndexOf;lodash.mixin=mixin;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.result=result;lodash.runInContext=runInContext;lodash.size=size;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.template=template;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.all=every;lodash.any=some;lodash.detect=find;lodash.findWhere=find;lodash.foldl=reduce;lodash.foldr=reduceRight;lodash.include=contains;lodash.inject=reduce;mixin(function(){var source={};forOwn(lodash,function(func,methodName){if(!lodash.prototype[methodName]){source[methodName]=func}});return source}(),false);lodash.first=first;lodash.last=last;lodash.sample=sample;lodash.take=first;lodash.head=first;forOwn(lodash,function(func,methodName){var callbackable=methodName!=="sample";if(!lodash.prototype[methodName]){lodash.prototype[methodName]=function(n,guard){var chainAll=this.__chain__,result=func(this.__wrapped__,n,guard);return!chainAll&&(n==null||guard&&!(callbackable&&typeof n=="function"))?result:new lodashWrapper(result,chainAll)}}});lodash.VERSION="2.4.1";lodash.prototype.chain=wrapperChain;lodash.prototype.toString=wrapperToString;lodash.prototype.value=wrapperValueOf;lodash.prototype.valueOf=wrapperValueOf;forEach(["join","pop","shift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){var chainAll=this.__chain__,result=func.apply(this.__wrapped__,arguments);return chainAll?new lodashWrapper(result,chainAll):result}});forEach(["push","reverse","sort","unshift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){func.apply(this.__wrapped__,arguments);return this}});forEach(["concat","slice","splice"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){return new lodashWrapper(func.apply(this.__wrapped__,arguments),this.__chain__)
}});return lodash}var _=runInContext();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){root._=_;define(function(){return _})}else if(freeExports&&freeModule){if(moduleExports){(freeModule.exports=_)._=_}else{freeExports._=_}}else{root._=_}}).call(this)}).call(this,typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],105:[function(require,module,exports){var process=module.exports={};process.nextTick=function(){var canSetImmediate=typeof window!=="undefined"&&window.setImmediate;var canPost=typeof window!=="undefined"&&window.postMessage&&window.addEventListener;if(canSetImmediate){return function(f){return window.setImmediate(f)}}if(canPost){var queue=[];window.addEventListener("message",function(ev){var source=ev.source;if((source===window||source===null)&&ev.data==="process-tick"){ev.stopPropagation();if(queue.length>0){var fn=queue.shift();fn()}}},true);return function nextTick(fn){queue.push(fn);window.postMessage("process-tick","*")}}return function nextTick(fn){setTimeout(fn,0)}}();process.title="browser";process.browser=true;process.env={};process.argv=[];function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")}},{}]},{},[1]);